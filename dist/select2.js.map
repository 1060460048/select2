{"version":3,"sources":["webpack://select2/webpack/universalModuleDefinition","webpack://select2/webpack/bootstrap","webpack://select2/./src/util.ts","webpack://select2/external {\"root\":\"React\",\"commonjs2\":\"react\",\"commonjs\":\"react\",\"amd\":\"react\"}","webpack://select2/./src/select2.scss?b0d7","webpack://select2/./node_modules/classnames/bind.js","webpack://select2/./src/select2.tsx","webpack://select2/./src/announce.ts","webpack://select2/./src/dropdown.tsx","webpack://select2/external {\"root\":\"ReactDOM\",\"commonjs2\":\"react-dom\",\"commonjs\":\"react-dom\",\"amd\":\"react-dom\"}","webpack://select2/./src/dictionary.ts"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__1__","__WEBPACK_EXTERNAL_MODULE__9__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","style","classNames","cn","extend","params","_i","arguments","length","Key","ArrowDown","ArrowUp","ArrowLeft","ArrowRight","Space","Enter","Tab","Home","End","PageUp","PageDown","Backspace","Delete","Clear","Escape","uuid","counter","getScrollParents","el","elementPosition","getComputedStyle","position","parents","parent","parentElement","nodeType","style_1","test","overflow","overflowX","overflowY","indexOf","push","ownerDocument","body","document","defaultView","throttle","delay","callback","timeout","undefined","clearTimeout","setTimeout","calculateVerticalVisibility","container","element","getBoundingClientRect","e","bottom","top","scope","delegate","s2-control","s2Control","s2-multi","s2Multi","s2-body","s2Body","s2-toggle","s2Toggle","s2-multi-values","s2MultiValues","s2-remove","s2Remove","s2-search","s2Search","s2-item","s2Item","s2-remove-x","s2RemoveX","s2-label","s2Label","s2-offscreen","s2Offscreen","s2-dropdown","s2Dropdown","s2-options","s2Options","s2-no-search-results","s2NoSearchResults","s2-search-results-message","s2SearchResultsMessage","s2-search-results-loading","s2SearchResultsLoading","s2-search-results-minimum-error","s2SearchResultsMinimumError","s2-search-results","s2SearchResults","s2-open","s2Open","s2-focused","s2Focused","s2-content","s2Content","s2-active","s2Active","s2-selected","s2Selected","s2-live","s2Live","__WEBPACK_AMD_DEFINE_RESULT__","hasOwn","classes","arg","argType","this","Array","isArray","apply","join","default","React","announce","util","util_1","dropdown_1","dictionary_1","MultiSelect","_super","props","_this","onRemoveSelectedValuesClicked","event","selected","state","selectedValues","values","slice","sort","splice","setState","activeValue","valuesRef","current","focus","focusSearch","onValueClicked","index","toggleSelectedValue","onValuesFocus","setActiveValue","focused","onValuesBlur","onValuesKeyDown","active","preventDefault","onSearchResultClicked","selectSearchResult","onMouseDownSearchResult","activeSearchResult","setActiveSearchResult","onMouseEnterSearchResult","lastMouseClientX","clientX","lastMouseClientY","clientY","onSearchKeyDown","results","searchResults","close","open","search","onRemoveValuesFocus","onRemoveValuesBlur","onSearchFocus","openOnSearchFocus","searchFocussedPragmatically","onSearchBlur","onSearchChanged","target","onDropdownScroll","showLoadMoreResults","more","loadingMoreResults","drop","dropdownRef","onLoadMore","onRemove","oldValues","newValues","removedValue","onValueRemoved","onValuesChanged","focus_1","getElementById","getValueDomId","onToggleMouseDownCapture","toggleWasOpen","onToggleClick","id","controlRef","createRef","searchRef","searchPage","searchResultDomIds","searchHasMoreResults","showNoSearchResultsFound","searchResultsLoading","showMinimumCharactersError","__extends","componentWillMount","initialize","componentDidUpdate","prevProps","prevState","scrollTop","offsetTop","offsetHeight","clientHeight","getSearchResultDomId","delta","render","dict","dictionary","searchId","getSearchDomId","dropdownId","getDropdownDomId","valuesLabel","searchLabel","createElement","ref","className","map","type","getItemId","Fragment","getValuesLabelDomId","tabIndex","role","aria-orientation","aria-activedescendant","aria-multiselectable","aria-label","aria-labelledby","onKeyDown","onFocus","onBlur","aria-selected","getItemLabel","onClick","getValueContent","disabled","aria-disabled","title","removeButtonTitle","IconRemove","height","width","htmlFor","onChange","aria-autocomplete","aria-haspopup","aria-owns","aria-controls","aria-expanded","aria-busy","aria-hidden","onMouseDownCapture","IconToggle","Dropdown","control","maxHeight","onScroll","item","onMouseDown","onMouseMove","onMouseUp","getResultContent","noSearchResults","minimumCharactersMessage","minimumCharacters","itemId","valueContent","itemLabel","resultContent","oldSelected","newSelected","pos","label","politely","valueAdded","minimumCharactersReached","query","result","_a","sent","searchResultDomIds_1","forEach","page","searchResultDomIds_2","searchResults_1","defaultProps","PureComponent","viewBox","focusable","live","setAttribute","appendChild","assertive","polite","assertively","message","node","createTextNode","scrollHeight","react_dom_1","rect","pageYOffset","left","pageXOffset","throttledPosition","componentWillUnmount","scrollParents","removeEventListener","removeChild","createPortal","children","componentDidMount","addEventListener","AmericanEnglishDictionary","len","min","dictionaries","Map","set","fallback","instance"],"mappings":"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","file":"select2.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"), require(\"react-dom\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\", \"react-dom\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"select2\"] = factory(require(\"react\"), require(\"react-dom\"));\n\telse\n\t\troot[\"select2\"] = factory(root[\"React\"], root[\"ReactDOM\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__1__, __WEBPACK_EXTERNAL_MODULE__9__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","import * as style from \"./select2.scss\";\nimport * as classNames from \"classnames/bind\";\nimport * as React from \"react\";\n\nexport const cn = classNames.bind(style);\n\nexport function extend(...params: object[]) {\n    for (var i = 1; i < arguments.length; i++)\n        for (var key in arguments[i])\n            if (arguments[i].hasOwnProperty(key)) {\n                if (typeof arguments[0][key] === 'object'\n                    && typeof arguments[i][key] === 'object')\n                    extend(arguments[0][key], arguments[i][key]);\n                else\n                    arguments[0][key] = arguments[i][key];\n            }\n    return arguments[0];\n}\n\nexport const Key = {\n    // https://www.w3.org/TR/uievents-key/#named-key-attribute-values\n    ArrowDown: \"ArrowDown\",\n    ArrowUp: \"ArrowUp\",\n    ArrowLeft: \"ArrowLeft\",\n    ArrowRight: \"ArrowRight\",\n    Space: \" \",\n    Enter: \"Enter\",\n    Tab: \"Tab\",\n    Home: \"Home\",\n    End: \"End\",\n    PageUp: \"PageUp\",\n    PageDown: \"PageDown\",\n    Backspace: \"Backspace\",\n    Delete: \"Delete\",\n    Clear: \"Clear\",\n    Escape: \"Escape\"\n}\n\nexport const uuid = (function() {\n    let counter=0;\n    return function() {\n        return counter++;\n    }\n})();\n\n\nexport function getScrollParents(el: HTMLElement): EventTarget[] {\n    const style = window.getComputedStyle(el);\n    const elementPosition = style.position;\n    if (elementPosition == \"fixed\") {\n        return [el];\n    }\n\n    const parents = [];\n    let parent = el.parentElement;\n\n    while (parent && parent.nodeType == 1) {\n        const style = window.getComputedStyle(parent);\n        if (/(overlay|scroll|auto)/.test(style.overflow + \" \" + style.overflowX + \" \" + style.overflowY)) {\n            if (elementPosition != \"absolute\" || [\"relative\", \"fixed\", \"absolute\"].indexOf(style.position) >= 0) {\n                parents.push(parent);\n            }\n        }\n        parent = parent.parentElement;\n    }\n\n    parents.push(el.ownerDocument.body);\n\n    // iframe\n    if (el.ownerDocument !== document) {\n        parents.push(el.ownerDocument.defaultView);\n    }\n\n    parents.push(window);\n    return parents;\n}\n\nexport function throttle(delay:number, callback:()=>void):()=>void {\n    let timeout: number = undefined;\n    return function () {\n        if (timeout != undefined) {\n            window.clearTimeout(timeout);\n            timeout = undefined;\n        }\n\n        if (timeout == undefined) {\n            timeout=window.setTimeout(function () {\n                callback();\n                timeout = undefined;\n            }, delay);\n        }\n    };\n};\n\n\nexport function calculateVerticalVisibility(container: HTMLElement, element: HTMLElement): \"hidden\" | \"partial-top\" | \"partial-bottom\" | \"visible\" {\n    const c = container.getBoundingClientRect();\n    const e = element.getBoundingClientRect();\n\n    if (e.bottom < c.top) {\n        // above the fold\n        return \"hidden\";\n    }\n\n    if (e.top > c.bottom) {\n        // below the fold\n        return \"hidden\";\n    }\n\n    if (e.top < c.top && e.bottom <= c.bottom) {\n        return \"partial-top\";\n    }\n\n    if (e.top >= c.top && e.bottom > c.bottom) {\n        return \"partial-bottom\";\n    }\n\n    return \"visible\";\n\n}\n\n/** helper that makes it easier to declare a scope inside a jsx block */\nexport function scope(delegate: () => React.ReactChild) {\n    return delegate();\n}\n\n","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"s2-control\":\"s2-control\",\"s2Control\":\"s2-control\",\"s2-multi\":\"s2-multi\",\"s2Multi\":\"s2-multi\",\"s2-body\":\"s2-body\",\"s2Body\":\"s2-body\",\"s2-toggle\":\"s2-toggle\",\"s2Toggle\":\"s2-toggle\",\"s2-multi-values\":\"s2-multi-values\",\"s2MultiValues\":\"s2-multi-values\",\"s2-remove\":\"s2-remove\",\"s2Remove\":\"s2-remove\",\"s2-search\":\"s2-search\",\"s2Search\":\"s2-search\",\"s2-item\":\"s2-item\",\"s2Item\":\"s2-item\",\"s2-remove-x\":\"s2-remove-x\",\"s2RemoveX\":\"s2-remove-x\",\"s2-label\":\"s2-label\",\"s2Label\":\"s2-label\",\"s2-offscreen\":\"s2-offscreen\",\"s2Offscreen\":\"s2-offscreen\",\"s2-dropdown\":\"s2-dropdown\",\"s2Dropdown\":\"s2-dropdown\",\"s2-options\":\"s2-options\",\"s2Options\":\"s2-options\",\"s2-no-search-results\":\"s2-no-search-results\",\"s2NoSearchResults\":\"s2-no-search-results\",\"s2-search-results-message\":\"s2-search-results-message\",\"s2SearchResultsMessage\":\"s2-search-results-message\",\"s2-search-results-loading\":\"s2-search-results-loading\",\"s2SearchResultsLoading\":\"s2-search-results-loading\",\"s2-search-results-minimum-error\":\"s2-search-results-minimum-error\",\"s2SearchResultsMinimumError\":\"s2-search-results-minimum-error\",\"s2-search-results\":\"s2-search-results\",\"s2SearchResults\":\"s2-search-results\",\"s2-open\":\"s2-open\",\"s2Open\":\"s2-open\",\"s2-focused\":\"s2-focused\",\"s2Focused\":\"s2-focused\",\"s2-content\":\"s2-content\",\"s2Content\":\"s2-content\",\"s2-active\":\"s2-active\",\"s2Active\":\"s2-active\",\"s2-selected\":\"s2-selected\",\"s2Selected\":\"s2-selected\",\"s2-live\":\"s2-live\",\"s2Live\":\"s2-live\"};","/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(this && this[arg] || arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tclasses.push(classNames.apply(this, arg));\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(this && this[key] || key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","import * as React from \"react\";\nimport {CSSProperties} from \"react\";\nimport * as style from \"./select2.scss\";\nimport * as classNames from \"classnames/bind\";\nimport * as announce from \"./announce\";\nimport * as util from \"./util\";\nimport {Key, scope, uuid} from \"./util\";\nimport {Dropdown} from \"./dropdown\";\nimport {Dictionary, dictionary} from \"./dictionary\";\n\nlet cn = classNames.bind(style);\n\nexport interface QueryResult<T> {\n    values: T[],\n    more: boolean,\n}\n\ninterface MultiSelectProps<T> {\n    name: string;\n    values: T[];\n\n    itemId: ((item: T) => string) | (keyof T);\n    itemLabel: ((item: T) => string) | (keyof T);\n    valueContent: ((item: T) => (string | React.ReactChild)) | (keyof T);\n    resultContent?: ((item: T) => (string | React.ReactChild)) | (keyof T);\n\n    valuesLabel: (() => string) | string;\n    searchLabel: (() => string) | string;\n\n    query: (search: string, page: number) => Promise<QueryResult<T>>;\n\n    /*todo or react node*/\n    style?: CSSProperties;\n\n    // callbacks\n\n    onValuesChanged?: (values: T[], oldValues: T[]) => void;\n    onValueRemoved?: (value: T, newValues: T[], oldValues: T[]) => void;\n\n    // optional\n\n    dictionary: Dictionary | string;\n    openOnSearchFocus: boolean;\n    minimumCharacters: number;\n\n}\n\ninterface MultiSelectState<T> {\n    focused: boolean;\n    open: boolean;\n\n    values: T[];\n    activeValue: number;\n    selectedValues: number[];\n\n    search: string;\n    searchPage: number;\n    searchResults: T[] | undefined;\n    searchResultDomIds: number[] | undefined;\n    searchResultsLoading: boolean;\n    searchHasMoreResults: boolean;\n    activeSearchResult: number;\n    showNoSearchResultsFound: boolean;\n    showLoadMoreResults: boolean;\n    showMinimumCharactersError: boolean;\n}\n\n\nexport class MultiSelect<T> extends React.PureComponent<MultiSelectProps<T>, MultiSelectState<T>> {\n\n    static defaultProps = {\n        dictionary: \"en_us\",\n        openOnSearchFocus: true,\n        minimumCharacters: 0\n    }\n\n\n    id: string;\n\n    searchRef: React.RefObject<HTMLInputElement>;\n    controlRef: React.RefObject<any>;\n    valuesRef: React.RefObject<HTMLDivElement>;\n    dropdownRef: React.RefObject<HTMLDivElement>;\n    loadingMoreResults: React.RefObject<HTMLDivElement>;\n    lastMouseClientX: number;\n    lastMouseClientY: number;\n\n    searchFocussedPragmatically: boolean;\n    toggleWasOpen: boolean;\n\n    constructor(props: MultiSelectProps<T>) {\n        super(props);\n        this.id = \"s2-multi-\" + uuid();\n        this.controlRef = React.createRef();\n        this.dropdownRef = React.createRef();\n        this.valuesRef = React.createRef();\n        this.searchRef = React.createRef();\n        this.loadingMoreResults = React.createRef();\n        this.searchFocussedPragmatically = false;\n\n        this.state = ({\n            focused: false,\n            open: false,\n\n            values: props.values,\n            activeValue: -1,\n            selectedValues: [],\n\n            search: \"\",\n            searchPage: 0,\n            searchResults: undefined,\n            searchResultDomIds: undefined,\n            searchHasMoreResults: false,\n            activeSearchResult: -1,\n            showNoSearchResultsFound: false,\n            searchResultsLoading: false,\n            showLoadMoreResults: false,\n            showMinimumCharactersError: false\n        });\n    }\n\n    componentWillMount() {\n        announce.initialize();\n    }\n\n    componentDidUpdate(prevProps: MultiSelectProps<T>, prevState: MultiSelectState<T>) {\n\n        if (prevState.activeSearchResult != this.state.activeSearchResult) {\n\n            if (this.state.activeSearchResult >= 0\n                && this.state.searchResults.length > 0\n                && this.state.activeSearchResult == (this.state.searchResults.length - 1)\n                && this.state.showLoadMoreResults) {\n                // last result is selected and load more is shown, make sure it is scrolled into view\n\n                const drop = this.dropdownRef.current;\n                const el = this.loadingMoreResults.current;\n\n                drop.scrollTop = el.offsetTop + el.offsetHeight - drop.clientHeight;\n\n\n                //console.log(\"scrolling to see load more\");//, setting scrolltop\", drop, el, el.offsetTop - drop.clientHeight);\n\n\n            } else if (this.state.activeSearchResult >= 0) {\n                // make sure it is scrolled into view\n                const id = this.getSearchResultDomId(this.state.activeSearchResult);\n                const el = document.getElementById(id);\n                if (el != null) {\n                    const drop = this.dropdownRef.current;\n\n                    const c = drop.getBoundingClientRect();\n                    const e = el.getBoundingClientRect();\n\n                    if (e.top < c.top && e.bottom <= c.bottom) {\n                        const delta = c.top - e.top;\n                        drop.scrollTop = drop.scrollTop - delta;\n                        //console.log(\"scrolling into view top\");\n                    }\n\n                    if (e.top >= c.top && e.bottom > c.bottom) {\n                        const delta = e.bottom - c.bottom;\n                        drop.scrollTop = drop.scrollTop + delta;\n                        //console.log(\"scrolling into view bottom\");\n                    }\n\n                }\n            }\n        }\n    }\n\n    render() {\n        const props = this.props;\n        const dict = dictionary(props.dictionary);\n        const state = this.state;\n        const searchId = this.getSearchDomId();\n        const dropdownId = this.getDropdownDomId();\n        const valuesLabel = typeof(props.valuesLabel) === \"function\" ? props.valuesLabel() : props.valuesLabel;\n        const searchLabel = typeof(props.searchLabel) === \"function\" ? props.searchLabel() : props.searchLabel;\n        return (\n            <div ref={this.controlRef} id={this.id} style={props.style} className={\n                cn(style.s2Multi, style.s2Control, {\n                    s2SearchResultsLoading: state.searchResultsLoading,\n                    s2Focused: state.focused,\n                    s2Open: state.open,\n                })}>\n                <div className={style.s2Body}>\n                    {state.values.map((value, index) => {\n                        return <input key={index} type=\"hidden\" name={props.name} value={this.getItemId(value)}/>\n                    })\n                    }\n                    {state.values.length > 0 &&\n                    <React.Fragment>\n                        <label className={style.s2Offscreen} id={this.getValuesLabelDomId()}>\n                            {valuesLabel}\n                        </label>\n                        <div ref={this.valuesRef}\n                             className={style.s2MultiValues}\n                             tabIndex={0}\n                             role=\"listbox\"\n                             aria-orientation=\"horizontal\"\n                             aria-activedescendant={this.getValueDomId(state.activeValue)}\n                             aria-multiselectable=\"true\"\n                             aria-label={valuesLabel}\n                             aria-labelledby={this.getValuesLabelDomId()}\n                             onKeyDown={this.onValuesKeyDown}\n                             onFocus={this.onValuesFocus}\n                             onBlur={this.onValuesBlur}>\n                            {state.values.map((value, index) => {\n                                const selected = state.selectedValues.indexOf(index) >= 0;\n                                const active = state.activeValue == index;\n                                const id = this.getValueDomId(index);\n                                const classes = cn(style.s2Item, {s2Active: active, s2Selected: selected});\n                                return (\n                                    <div key={index}\n                                         id={id}\n                                         className={classes}\n                                         role=\"option\"\n                                         aria-selected={selected}\n                                         aria-label={this.getItemLabel(value)}\n                                         onClick={this.onValueClicked(index)}>\n                                        <div className={style.s2Content}>\n                                            {this.getValueContent(value)}\n                                        </div>\n                                    </div>\n                                );\n                            })}\n                        </div>\n                    </React.Fragment>\n                    }\n\n                    {scope(() => {\n                        //\n                        // REMOVE BUTTON\n                        //\n                        const disabled = state.selectedValues.length < 1;\n                        const className = cn(style.s2Remove, {s2Offscreen: state.values.length < 1});\n                        return (\n                            <button className={className}\n                                    onClick={this.onRemoveSelectedValuesClicked}\n                                    onFocus={this.onRemoveValuesFocus}\n                                    onBlur={this.onRemoveValuesBlur}\n                                    disabled={disabled}\n                                    aria-disabled={disabled}\n                                    title={dict.removeButtonTitle()}>\n                                <span>\n                                    <IconRemove height={20} width={20}/>\n                                </span>\n                            </button>\n                        );\n                    })}\n\n                    <label htmlFor={searchId} className={style.s2Offscreen}>\n                        {searchLabel}\n                    </label>\n                    <input ref={this.searchRef}\n                           className={style.s2Search}\n                           type=\"text\"\n                           id={searchId}\n                           value={state.search}\n                           onChange={this.onSearchChanged}\n                           onKeyDown={this.onSearchKeyDown}\n                           onFocus={this.onSearchFocus}\n                           onBlur={this.onSearchBlur}\n                           role=\"combobox\"\n                           aria-autocomplete=\"none\"\n                           aria-haspopup=\"true\"\n                           aria-owns={dropdownId}\n                           aria-controls={dropdownId}\n                           aria-expanded={state.open}\n                           aria-activedescendant={this.getSearchResultDomId(state.activeSearchResult)}\n                           aria-busy={state.searchResultsLoading}\n                    />\n\n                </div>\n                {/* s2body */}\n\n                <div className={style.s2Toggle}\n                     aria-hidden={true}\n                     onMouseDownCapture={this.onToggleMouseDownCapture}\n                     onClick={this.onToggleClick}>\n                    <IconToggle height={20} width={20}/>\n                </div>\n\n                {state.open &&\n                <Dropdown control={this.controlRef.current} className={style.s2Dropdown}>\n\n                    <div className={style.s2Body + \" \" + style.s2SearchResults}\n                         style={{maxHeight: \"120px\"}}\n                         ref={this.dropdownRef}\n                         aria-busy={state.searchResultsLoading}\n                         id={dropdownId}\n                         onScroll={this.onDropdownScroll}>\n                        {state.searchResults && state.searchResults.length > 0 &&\n                        (\n                            <div className={style.s2Options}\n                                 role=\"listbox\"\n                                 aria-activedescendant={this.getSearchResultDomId(state.activeSearchResult)}>\n                                {\n                                    state.searchResults.map((item, i) => {\n                                        const className = cn(style.s2Item, {s2Active: state.activeSearchResult == i});\n                                        return (\n                                            <div key={i}\n                                                 className={className}\n                                                 id={this.getSearchResultDomId(i)}\n                                                 onMouseDown={this.onMouseDownSearchResult(i)}\n                                                 onMouseMove={this.onMouseEnterSearchResult(i)}\n                                                 onMouseUp={this.onSearchResultClicked(i)}\n                                                 role=\"option\"\n                                                 aria-selected={state.activeSearchResult === i}\n                                            >\n                                                {this.getResultContent(item)}\n                                            </div>);\n                                    })\n                                }\n                            </div>\n\n                        )}\n                        {state.showNoSearchResultsFound &&\n                        <div className={style.s2NoSearchResults}>{dict.noSearchResults()}</div>\n                        }\n                        {(state.searchResultsLoading || state.showLoadMoreResults) &&\n                        <div ref={this.loadingMoreResults}\n                             className={cn(style.s2SearchResultsLoading, style.s2SearchResultsMessage)}>{dict.searchResultsLoading()}</div>\n                        }\n                        {(state.showMinimumCharactersError) &&\n                        <div className={cn(style.s2SearchResultsMinimumError, style.s2SearchResultsMessage)}>\n                            {dict.minimumCharactersMessage(state.search.length, props.minimumCharacters)}\n                        </div>\n                        }\n                    </div>\n                </Dropdown>\n                }\n\n            </div>\n        )\n    }\n\n    getItemId(item: T): string {\n        if (typeof this.props.itemId === \"function\") {\n            return this.props.itemId(item);\n        } else {\n            return \"\" + item[this.props.itemId];\n        }\n    }\n\n    getValueContent(item: T) {\n        if (typeof this.props.valueContent === \"function\") {\n            return this.props.valueContent(item);\n        } else {\n            return item[this.props.valueContent];\n        }\n    }\n\n    getItemLabel(item: T): string {\n        if (typeof this.props.itemLabel === \"function\") {\n            return this.props.itemLabel(item);\n        } else {\n            return \"\" + item[this.props.itemLabel];\n        }\n    }\n\n    getResultContent(item: T) {\n        if (this.props.resultContent) {\n            if (typeof this.props.resultContent === \"function\") {\n                return this.props.resultContent(item);\n            } else {\n                return item[this.props.resultContent];\n            }\n        } else {\n            return this.getValueContent(item);\n        }\n    }\n\n    setActiveValue(index: number) {\n        this.setState({activeValue: index});\n    }\n\n    toggleSelectedValue(index: number) {\n        const oldSelected = this.state.selectedValues;\n        const newSelected = oldSelected.slice();\n        const pos = oldSelected.indexOf(index);\n        if (pos >= 0) {\n            newSelected.splice(pos, 1);\n        } else {\n            newSelected.push(index);\n        }\n        this.setState({selectedValues: newSelected, activeValue: index});\n\n    }\n\n    onRemoveSelectedValuesClicked = (event: React.MouseEvent) => {\n        const selected = this.state.selectedValues;\n        const values = this.state.values.slice();\n\n        selected.sort();\n        for (let i = 0; i < selected.length; i++) {\n            values.splice(selected[i] - i, 1);\n        }\n        this.setState({values: values, selectedValues: [], activeValue: values.length > 0 ? 0 : -1});\n        if (values.length > 0) {\n            this.valuesRef.current.focus();\n        } else {\n            this.focusSearch();\n        }\n    }\n\n    onValueClicked = (index: number) => (event: React.MouseEvent) => {\n        this.toggleSelectedValue(index);\n    }\n\n    onValuesFocus = (event: React.FocusEvent) => {\n        let index = 0;\n        if (this.state.selectedValues.length > 0) {\n            index = this.state.selectedValues[0];\n        }\n        this.setActiveValue(index);\n        this.setState({focused: true});\n    }\n\n    onValuesBlur = (event: React.FocusEvent) => {\n        this.setActiveValue(-1);\n        this.setState({focused: false});\n    }\n\n    onValuesKeyDown = (event: React.KeyboardEvent) => {\n        const values = this.state.values;\n        const active = this.state.activeValue;\n\n        //console.log(event.key);\n\n        switch (event.key) {\n            case Key.ArrowLeft: {\n                if (active > 0) {\n                    this.setActiveValue(active - 1);\n                }\n                event.preventDefault();\n                break;\n            }\n            case Key.ArrowRight: {\n                if (active < values.length - 1) {\n                    this.setActiveValue(active + 1);\n                }\n                event.preventDefault();\n                break;\n            }\n            case Key.PageDown: {\n                // TODO\n                event.preventDefault();\n                break;\n            }\n            case Key.PageUp: {\n                // TODO\n                event.preventDefault();\n                break;\n            }\n            case Key.Home: {\n                this.setActiveValue(0);\n                event.preventDefault();\n                break;\n            }\n            case Key.End: {\n                this.setActiveValue(values.length - 1);\n                event.preventDefault();\n                break;\n            }\n            case Key.Space: {\n                this.toggleSelectedValue(active);\n                event.preventDefault();\n                break;\n            }\n        }\n    }\n\n\n    onSearchResultClicked = (index: number) => (event: React.MouseEvent) => {\n        this.selectSearchResult(index);\n        event.preventDefault();\n    }\n\n    onMouseDownSearchResult = (index: number) => (event: React.MouseEvent) => {\n        if (this.state.activeSearchResult != index) {\n            this.setActiveSearchResult(index);\n        }\n        event.preventDefault();\n    }\n\n    onMouseEnterSearchResult = (index: number) => (event: React.MouseEvent) => {\n        if (this.lastMouseClientX == event.clientX && this.lastMouseClientY == event.clientY) {\n            // the mouse did not move, the dropdown was scrolled instead, we do not change selected element because\n            // it will be scrolled into view and mess with the scrolling of the results in the dropdown\n            return;\n        }\n\n\n        this.lastMouseClientX = event.clientX;\n        this.lastMouseClientY = event.clientY;\n        if (this.state.activeSearchResult != index) {\n            this.setActiveSearchResult(index);\n        }\n    }\n\n    setActiveSearchResult = (index: number) => {\n        this.setState({activeSearchResult: index});\n    }\n\n    onSearchKeyDown = (event: React.KeyboardEvent) => {\n        const results = this.state.searchResults;\n\n        if (!results || results.length < 1) {\n            return;\n        }\n\n        const active = this.state.activeSearchResult;\n\n        switch (event.key) {\n            case Key.ArrowUp: {\n                if (active > 0) {\n                    this.setActiveSearchResult(active - 1);\n                }\n                event.preventDefault();\n                break;\n            }\n            case Key.ArrowDown: {\n                if (active < results.length - 1) {\n                    this.setActiveSearchResult(active + 1);\n                }\n                event.preventDefault();\n                break;\n            }\n            case Key.PageDown: {\n                // TODO\n                event.preventDefault();\n                break;\n            }\n            case Key.PageUp: {\n                // TODO\n                event.preventDefault();\n                break;\n            }\n            case Key.Home: {\n                this.setActiveSearchResult(0);\n                event.preventDefault();\n                break;\n            }\n            case Key.End: {\n                this.setActiveSearchResult(results.length - 1);\n                event.preventDefault();\n                break;\n            }\n            case Key.Escape: {\n                this.close();\n                event.preventDefault();\n                break;\n            }\n            case Key.Enter: {\n                this.selectSearchResult(this.state.activeSearchResult);\n                break;\n            }\n        }\n    }\n\n    open = () => {\n        this.search(\"\");\n        this.focusSearch();\n    }\n\n    close() {\n        this.setState({\n            open: false,\n            searchResults: undefined,\n            activeSearchResult: -1,\n            showNoSearchResultsFound: false,\n            searchResultsLoading: false,\n            search: \"\"\n        });\n    }\n\n\n    selectSearchResult(index: number) {\n        const selected = this.state.searchResults[index];\n        const values = this.state.values.slice();\n        values.push(selected);\n        this.setState({\n            values: values\n        });\n        this.close();\n\n        const label = this.getItemLabel(selected);\n        announce.politely(dictionary(this.props.dictionary).valueAdded(label));\n    }\n\n\n    onRemoveValuesFocus = (event: React.FocusEvent) => {\n        this.setState({focused: true});\n    }\n\n    onRemoveValuesBlur = (event: React.FocusEvent) => {\n        this.setState({focused: false});\n    }\n\n\n    focusSearch() {\n        this.searchFocussedPragmatically = true;\n        this.searchRef.current.focus();\n    }\n\n    onSearchFocus = (event: React.FocusEvent) => {\n\n        this.setState({focused: true});\n        if (this.props.openOnSearchFocus && !this.searchFocussedPragmatically) {\n            this.open();\n        }\n\n        this.searchFocussedPragmatically = false;\n    }\n\n    onSearchBlur = (event: React.FocusEvent) => {\n        this.setState({focused: false, open: false, search: \"\"});\n    }\n\n\n    async search(value: string) {\n        const props = this.props;\n        const dict = dictionary(props.dictionary);\n        const searchPage = 0;\n\n        const minimumCharactersReached = (value.length >= this.props.minimumCharacters);\n\n        this.setState({\n            searchResults: undefined,\n            searchResultDomIds: undefined,\n            search: value,\n            searchPage: searchPage,\n            searchResultsLoading: minimumCharactersReached,\n            showNoSearchResultsFound: false,\n            open: true,\n            activeSearchResult: -1,\n            showLoadMoreResults: false,\n            showMinimumCharactersError: !minimumCharactersReached\n        });\n\n        if (!minimumCharactersReached) {\n            // todo - throttle this announcement?\n            announce.politely(dict.minimumCharactersMessage(value.length, this.props.minimumCharacters));\n            return;\n        }\n\n        // todo - throttle this announcement?\n        announce.politely(dict.searchResultsLoading());\n        try {\n            const result = await this.props.query(value, searchPage);\n            let searchResultDomIds: number[] = [];\n            result.values.forEach(() => {\n                searchResultDomIds.push(uuid())\n            });\n\n            if (result.values.length < 1) {\n                announce.politely(dict.noSearchResults());\n            }\n\n            this.setState({\n                searchResults: result.values,\n                searchResultDomIds: searchResultDomIds,\n                searchHasMoreResults: result.more,\n                activeSearchResult: result.values.length > 0 ? 0 : -1,\n                showNoSearchResultsFound: result.values.length < 1,\n                searchResultsLoading: false,\n                showLoadMoreResults: result.more,\n                searchPage: 0\n            });\n        } catch (e) {\n            // TODO for now assuming all failures are cancellations, should we treat them differently?\n\n        }\n\n    }\n\n    onSearchChanged = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const value = event.target.value;\n        this.search(value);\n    }\n\n    async onLoadMore() {\n        if (this.state.searchResultsLoading) {\n            return;\n        }\n        const dict = dictionary(this.props.dictionary);\n        const page = this.state.searchPage + 1;\n        const value = this.searchRef.current.value;\n        this.setState({\n            searchResultsLoading: true,\n        });\n\n        announce.politely(dict.searchResultsLoading());\n\n        try {\n            const result = await this.props.query(value, page);\n            const searchResultDomIds = this.state.searchResultDomIds.slice();\n            const searchResults = this.state.searchResults.slice();\n            result.values.forEach((result) => {\n                searchResults.push(result);\n                searchResultDomIds.push(uuid())\n            });\n\n            if (result.values.length < 1) {\n                // TODO announce no further results\n                announce.politely(dict.noSearchResults());\n            }\n\n            this.setState({\n                searchResults: searchResults,\n                searchResultDomIds: searchResultDomIds,\n                searchHasMoreResults: result.more,\n                searchResultsLoading: false,\n                showLoadMoreResults: result.more,\n                searchPage: page\n                // TODO collapse showLoadMoreReults and searchhasMoreResults?\n            });\n\n        } catch (e) {\n            // TODO for now assuming all failures are canellations, should we treat them differently?\n        }\n\n\n    }\n\n    onDropdownScroll = (event: React.UIEvent) => {\n        if (!this.state.showLoadMoreResults) {\n            return;\n        }\n        const more = this.loadingMoreResults.current;\n        const drop = this.dropdownRef.current;\n\n        const visibility = util.calculateVerticalVisibility(drop, more);\n        if (visibility !== \"hidden\") {\n            this.onLoadMore();\n        }\n\n    }\n\n\n    onRemove = (index: number) => (event: React.MouseEvent) => {\n        const oldValues = this.state.values;\n        const newValues = this.state.values.slice();\n        const removedValue = newValues.splice(index, 1)[0];\n\n        if (this.props.onValueRemoved) {\n            this.props.onValueRemoved(removedValue, oldValues, newValues);\n        }\n\n        if (this.props.onValuesChanged) {\n            this.props.onValuesChanged(newValues, oldValues);\n        }\n\n        this.setState({values: newValues}, () => {\n            //console.log(\"set state callback\");\n            if (this.state.values.length == 0) {\n                this.focusSearch();\n            } else {\n                const values = this.state.values;\n                let focus = index;\n                if (focus >= values.length) {\n                    focus = values.length - 1;\n                }\n                document.getElementById(this.getValueDomId(focus)).focus();\n            }\n\n        });\n    }\n\n    getValuesLabelDomId() {\n        return this.id + \"-values-label\";\n    }\n\n\n    getSearchDomId() {\n        return this.id + \"-search\";\n    }\n\n    getDropdownDomId() {\n        return this.id + \"-dropdown\";\n    }\n\n\n    getValueDomId(index: number) {\n        return (index === undefined || index < 0) ? undefined : this.id + \"-value-\" + index;\n    }\n\n    getSearchResultDomId(index: number) {\n        return (index === undefined || index < 0) ?\n            undefined :\n            this.id + \"-result-\" + this.state.searchResultDomIds[index];\n    }\n\n    onToggleMouseDownCapture = (event: React.MouseEvent) => {\n        this.toggleWasOpen = this.state.open;\n    }\n\n    onToggleClick = (event: React.MouseEvent) => {\n        if (this.toggleWasOpen) {\n            this.close();\n        } else {\n            this.open();\n        }\n        this.focusSearch();\n    }\n\n}\n\n\nclass IconToggle extends React.PureComponent<{ height: number, width: number }, {}> {\n    render() {\n        const viewBox = \"0 0 \" + this.props.width + \" \" + this.props.height;\n        return <svg height={this.props.height} width={this.props.width} viewBox={viewBox} tabIndex={-1}\n                    focusable=\"false\">\n            <path\n                d=\"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z\"></path>\n        </svg>\n    }\n}\n\nclass IconRemove extends React.PureComponent<{ height: number, width: number }, {}> {\n    render() {\n        const viewBox = \"0 0 \" + this.props.width + \" \" + this.props.height;\n        return <svg height={this.props.height} width={this.props.width} viewBox={viewBox} tabIndex={-1}\n                    focusable=\"false\">\n            <path\n                d=\"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z\"></path>\n        </svg>\n    }\n}\n","export function initialize() {\n    if (document.getElementById(\"s2-live\")) {\n        return;\n    }\n\n    const live=document.createElement(\"div\");\n    live.setAttribute(\"id\", \"s2-live\");\n    live.setAttribute(\"class\", \"s2-offscreen s3-live\");\n    document.body.appendChild(live);\n\n    const assertive=document.createElement(\"div\");\n    assertive.setAttribute(\"id\", \"s2-live-assertive\");\n    assertive.setAttribute(\"role\", \"log\");\n    assertive.setAttribute(\"aria-live\", \"assertive\");\n    assertive.setAttribute(\"aria-relevant\", \"additions\");\n    live.appendChild(assertive);\n\n    const polite=document.createElement(\"div\");\n    polite.setAttribute(\"id\", \"s2-live-polite\");\n    polite.setAttribute(\"role\", \"log\");\n    polite.setAttribute(\"aria-live\", \"polite\");\n    polite.setAttribute(\"aria-relevant\", \"additions\");\n    live.appendChild(polite);\n\n}\n\nexport function assertively(message:string) {\n    const node=document.createElement(\"div\");\n    node.appendChild(document.createTextNode(message));\n    document.getElementById(\"s2-live-assertive\").appendChild(node);\n    // TODO clean up old nodes\n\n\n    // for debugging\n    const live=document.getElementById(\"s2-live\");\n    live.scrollTop = live.scrollHeight;\n\n}\n\nexport function politely(message:string) {\n    const node=document.createElement(\"div\");\n    node.appendChild(document.createTextNode(message));\n    document.getElementById(\"s2-live-polite\").appendChild(node);\n\n\n    // for debugging\n    const live=document.getElementById(\"s2-live\");\n    live.scrollTop = live.scrollHeight;\n\n    // TODO clean up old nodes\n}\n","import * as React from \"react\";\nimport * as util from \"./util\";\nimport {createPortal} from \"react-dom\";\n\nexport interface DropdownProps {\n    control: HTMLElement, // TODO make this a ref\n    className?: string,\n    children: React.ReactNode\n}\n\nexport class Dropdown extends React.PureComponent<DropdownProps, {}> {\n\n    container: HTMLElement;\n\n    scrollParents: EventTarget[];\n    private throttledPosition: () => void;\n\n    constructor(props: DropdownProps) {\n        super(props);\n        this.throttledPosition = util.throttle(50, this.position);\n    }\n\n    componentWillMount() {\n        this.container = document.createElement(\"div\");\n        const cn = this.props.className;\n        if (cn) {\n            this.container.setAttribute(\"class\", cn);\n        }\n        document.body.appendChild(this.container);\n\n    }\n\n    componentWillUnmount() {\n        this.scrollParents.forEach((parent) => {\n            [\"resize\", \"scroll\", \"touchmove\"].forEach((event) => {\n                parent.removeEventListener(event, this.throttledPosition);\n            });\n        });\n        delete this.scrollParents;\n        document.body.removeChild(this.container);\n        delete this.container;\n    }\n\n\n    render() {\n        return createPortal(this.props.children, this.container);\n    }\n\n    componentDidMount() {\n        this.scrollParents = util.getScrollParents(this.props.control);\n        this.scrollParents.forEach((parent) => {\n            [\"resize\", \"scroll\", \"touchmove\"].forEach((event) => {\n                parent.addEventListener(event, this.throttledPosition);\n            });\n        });\n        this.position();\n    }\n\n    componentDidUpdate() {\n        this.position();\n    }\n\n    position = () => {\n        const control = this.props.control;\n        const rect = control.getBoundingClientRect();\n        const style = `\n            top: ${rect.top + rect.height + window.pageYOffset}px;\n            left: ${rect.left + window.pageXOffset}px;\n            width: ${rect.width}px;\n        `;\n        // TODO also called on scroll of children - should not be\n        // console.log(\"position\");\n        this.container.setAttribute(\"style\", style);\n    }\n}\n\n","module.exports = __WEBPACK_EXTERNAL_MODULE__9__;","export interface Dictionary {\n    valueAdded:(itemLabel:string)=>string;\n\n    noSearchResults: () => string;\n    searchResultsLoading: () => string;\n    removeButtonTitle: () => string;\n    minimumCharactersMessage: (len:number, min:number)=>string;\n}\n\nclass AmericanEnglishDictionary implements Dictionary {\n\n    noSearchResults() {\n        return \"No results available\";\n    }\n\n    searchResultsLoading() {\n        return \"Loading...\";\n    }\n\n    removeButtonTitle() {\n        return \"Remove selected values\";\n    }\n    valueAdded(itemLabel:string) {\n        return itemLabel+\" added\";\n    }\n\n    minimumCharactersMessage(len: number, min: number) {\n        const delta=min-len;\n        return \"Please enter \"+delta+\" more character\"+(delta>1?\"s\":\"\");\n    }\n}\n\nconst dictionaries = new Map<string, Dictionary>();\ndictionaries.set(\"en_us\", new AmericanEnglishDictionary());\n\nexport function dictionary(dict: Dictionary | string): Dictionary {\n    const fallback = dictionaries.get(\"en_us\");\n\n    if (!dict) {\n        return fallback;\n    }\n\n    if (typeof dict == \"string\") {\n        const instance = dictionaries.get(dict);\n        return instance ? instance : fallback;\n    } else {\n        return dict;\n    }\n}\n"],"sourceRoot":""}