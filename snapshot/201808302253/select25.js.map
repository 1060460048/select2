{"version":3,"sources":["webpack://select25/webpack/universalModuleDefinition","webpack://select25/webpack/bootstrap","webpack://select25/./src/util.ts","webpack://select25/external {\"root\":\"React\",\"commonjs2\":\"react\",\"commonjs\":\"react\",\"amd\":\"react\"}","webpack://select25/./src/select2.scss?b0d7","webpack://select25/./node_modules/classnames/bind.js","webpack://select25/./src/select2.tsx","webpack://select25/./src/announce.ts","webpack://select25/./src/dropdown.tsx","webpack://select25/external {\"root\":\"ReactDOM\",\"commonjs2\":\"react-dom\",\"commonjs\":\"react-dom\",\"amd\":\"react-dom\"}","webpack://select25/./src/dictionary.ts"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__1__","__WEBPACK_EXTERNAL_MODULE__9__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","style","classNames","cn","extend","params","_i","arguments","length","Key","ArrowDown","ArrowUp","ArrowLeft","ArrowRight","Space","Enter","Tab","Home","End","PageUp","PageDown","Backspace","Delete","Clear","Escape","uuid","counter","debounce","quiet","delegate","that","timeout","undefined","apply","args","clearTimeout","setTimeout","getScrollParents","el","elementPosition","getComputedStyle","position","parents","parent","parentElement","nodeType","style_1","test","overflow","overflowX","overflowY","indexOf","push","ownerDocument","body","document","defaultView","throttle","delay","callback","calculateVerticalVisibility","container","element","getBoundingClientRect","e","bottom","top","scope","s25-control","s25Control","s25-multi","s25Multi","s25-body","s25Body","s25-toggle","s25Toggle","s25-multi-values","s25MultiValues","s25-remove","s25Remove","s25-search","s25Search","s25-item","s25Item","s25-remove-x","s25RemoveX","s25-label","s25Label","s25-offscreen","s25Offscreen","s25-dropdown","s25Dropdown","s25-options","s25Options","s25-no-search-results","s25NoSearchResults","s25-search-results-message","s25SearchResultsMessage","s25-search-results-loading","s25SearchResultsLoading","s25-search-results-minimum-error","s25SearchResultsMinimumError","s25-search-results","s25SearchResults","s25-open","s25Open","s25-focused","s25Focused","s25-content","s25Content","s25-active","s25Active","s25-selected","s25Selected","s25-live","s25Live","__WEBPACK_AMD_DEFINE_RESULT__","hasOwn","classes","arg","argType","this","Array","isArray","join","default","React","announce","util","util_1","dropdown_1","dictionary_1","MultiSelect","_super","props","_this","onRemoveSelectedValuesClicked","event","selected","state","selectedValues","values","slice","sort","splice","setState","activeValue","valuesRef","current","focus","focusSearch","onValueClicked","index","toggleSelectedValue","onValuesFocus","setActiveValue","focused","onValuesBlur","onValuesKeyDown","active","preventDefault","onSearchResultClicked","selectSearchResult","onMouseDownSearchResult","activeSearchResult","setActiveSearchResult","onMouseEnterSearchResult","lastMouseClientX","clientX","lastMouseClientY","clientY","onSearchKeyDown","results","searchResults","close","open","search","onRemoveValuesFocus","onRemoveValuesBlur","onSearchFocus","openOnSearchFocus","searchFocussedPragmatically","onSearchBlur","onSearchChanged","target","onDropdownScroll","showLoadMoreResults","more","loadingMoreResults","drop","dropdownRef","onLoadMore","onRemove","oldValues","newValues","removedValue","onValueRemoved","onValuesChanged","focus_1","getElementById","getValueDomId","onToggleMouseDownCapture","toggleWasOpen","onToggleClick","id","controlRef","createRef","searchRef","queryDebounced","quietMillis","query","searchPage","searchResultDomIds","searchHasMoreResults","showNoSearchResultsFound","searchResultsLoading","showMinimumCharactersError","__extends","componentWillMount","initialize","componentDidUpdate","prevProps","prevState","scrollTop","offsetTop","offsetHeight","clientHeight","getSearchResultDomId","delta","render","dict","dictionary","searchId","getSearchDomId","dropdownId","getDropdownDomId","valuesLabel","searchLabel","createElement","ref","className","map","type","getItemId","Fragment","getValuesLabelDomId","tabIndex","role","aria-orientation","aria-activedescendant","aria-multiselectable","aria-label","aria-labelledby","onKeyDown","onFocus","onBlur","aria-selected","getItemLabel","onClick","getValueContent","disabled","aria-disabled","title","removeButtonTitle","IconRemove","height","width","htmlFor","onChange","aria-autocomplete","aria-haspopup","aria-owns","aria-controls","aria-expanded","aria-busy","aria-hidden","onMouseDownCapture","IconToggle","Dropdown","control","maxHeight","onScroll","item","onMouseDown","onMouseMove","onMouseUp","getResultContent","noSearchResults","minimumCharactersMessage","minimumCharacters","itemId","valueContent","itemLabel","resultContent","oldSelected","newSelected","pos","label","politely","valueAdded","minimumCharactersReached","page","result","_a","sent","searchResultDomIds_1","forEach","searchResultDomIds_2","searchResults_1","defaultProps","PureComponent","viewBox","focusable","live","setAttribute","appendChild","assertive","polite","assertively","message","node","createTextNode","scrollHeight","react_dom_1","rect","pageYOffset","left","pageXOffset","throttledPosition","componentWillUnmount","scrollParents","removeEventListener","removeChild","createPortal","children","componentDidMount","addEventListener","AmericanEnglishDictionary","len","min","dictionaries","Map","set","fallback","instance"],"mappings":";;;;;;;;;;;;;;;;;;CAAA,SAAAA,EAAAC,GACA,iBAAAC,SAAA,iBAAAC,OACAA,OAAAD,QAAAD,EAAAG,QAAA,SAAAA,QAAA,cACA,mBAAAC,eAAAC,IACAD,QAAA,qBAAAJ,GACA,iBAAAC,QACAA,QAAA,SAAAD,EAAAG,QAAA,SAAAA,QAAA,cAEAJ,EAAA,SAAAC,EAAAD,EAAA,MAAAA,EAAA,UARA,CASCO,OAAA,SAAAC,EAAAC,GACD,mBCTA,IAAAC,KAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAV,QAGA,IAAAC,EAAAO,EAAAE,IACAC,EAAAD,EACAE,GAAA,EACAZ,YAUA,OANAa,EAAAH,GAAAI,KAAAb,EAAAD,QAAAC,IAAAD,QAAAS,GAGAR,EAAAW,GAAA,EAGAX,EAAAD,QA0DA,OArDAS,EAAAM,EAAAF,EAGAJ,EAAAO,EAAAR,EAGAC,EAAAQ,EAAA,SAAAjB,EAAAkB,EAAAC,GACAV,EAAAW,EAAApB,EAAAkB,IACAG,OAAAC,eAAAtB,EAAAkB,GAA0CK,YAAA,EAAAC,IAAAL,KAK1CV,EAAAgB,EAAA,SAAAzB,GACA,oBAAA0B,eAAAC,aACAN,OAAAC,eAAAtB,EAAA0B,OAAAC,aAAwDC,MAAA,WAExDP,OAAAC,eAAAtB,EAAA,cAAiD4B,OAAA,KAQjDnB,EAAAoB,EAAA,SAAAD,EAAAE,GAEA,GADA,EAAAA,IAAAF,EAAAnB,EAAAmB,IACA,EAAAE,EAAA,OAAAF,EACA,KAAAE,GAAA,iBAAAF,QAAAG,WAAA,OAAAH,EACA,IAAAI,EAAAX,OAAAY,OAAA,MAGA,GAFAxB,EAAAgB,EAAAO,GACAX,OAAAC,eAAAU,EAAA,WAAyCT,YAAA,EAAAK,UACzC,EAAAE,GAAA,iBAAAF,EAAA,QAAAM,KAAAN,EAAAnB,EAAAQ,EAAAe,EAAAE,EAAA,SAAAA,GAAgH,OAAAN,EAAAM,IAAqBC,KAAA,KAAAD,IACrI,OAAAF,GAIAvB,EAAA2B,EAAA,SAAAnC,GACA,IAAAkB,EAAAlB,KAAA8B,WACA,WAA2B,OAAA9B,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAQ,EAAAQ,EAAAE,EAAA,IAAAA,GACAA,GAIAV,EAAAW,EAAA,SAAAiB,EAAAC,GAAsD,OAAAjB,OAAAkB,UAAAC,eAAA1B,KAAAuB,EAAAC,IAGtD7B,EAAAgC,EAAA,GAIAhC,IAAAiC,EAAA,mFClFA,IAAAC,EAAAlC,EAAA,GACAmC,EAAAnC,EAAA,GAGaT,EAAA6C,GAAKD,EAAWT,KAAKQ,GAElC3C,EAAA8C,OAAA,SAAgBA,QAAO,IAAAC,KAAAC,EAAA,EAAAA,EAAAC,UAAAC,OAAAF,IAAAD,EAAAC,GAAAC,UAAAD,GACnB,IAAK,IAAIrC,EAAI,EAAGA,EAAIsC,UAAUC,OAAQvC,IAClC,IAAK,IAAIuB,KAAOe,UAAUtC,GAClBsC,UAAUtC,GAAG6B,eAAeN,KACK,iBAAtBe,UAAU,GAAGf,IACY,iBAAtBe,UAAUtC,GAAGuB,GACvBY,EAAOG,UAAU,GAAGf,GAAMe,UAAUtC,GAAGuB,IAEvCe,UAAU,GAAGf,GAAOe,UAAUtC,GAAGuB,IAEjD,OAAOe,UAAU,IAGRjD,EAAAmD,KAETC,UAAW,YACXC,QAAS,UACTC,UAAW,YACXC,WAAY,aACZC,MAAO,IACPC,MAAO,QACPC,IAAK,MACLC,KAAM,OACNC,IAAK,MACLC,OAAQ,SACRC,SAAU,WACVC,UAAW,YACXC,OAAQ,SACRC,MAAO,QACPC,OAAQ,UAGClE,EAAAmE,KAAO,WAChB,IAAIC,EAAU,EACd,OAAO,WACH,OAAOA,KAHK,GAQpBpE,EAAAqE,SAAA,SAAyBC,EAAeC,EAAoCC,GACxE,IAAIC,OAAkBC,EACtB,OAAIJ,EAAQ,EACD,WACHC,EAASI,MAAMH,EAAMvB,YAGlB,WACH,IAAI2B,EAAO3B,UACPwB,GACApE,OAAOwE,aAAaJ,GAExBA,EAAUpE,OAAOyE,WAAW,WACxBL,OAAUC,EACVH,EAASI,MAAMH,EAAMI,IACtBN,KAKftE,EAAA+E,iBAAA,SAAiCC,GAC7B,IACMC,EADQ5E,OAAO6E,iBAAiBF,GACRG,SAC9B,GAAuB,SAAnBF,EACA,OAAQD,GAMZ,IAHA,IAAMI,KACFC,EAASL,EAAGM,cAETD,GAA6B,GAAnBA,EAAOE,UAAe,CACnC,IAAMC,EAAQnF,OAAO6E,iBAAiBG,GAClC,wBAAwBI,KAAKD,EAAME,SAAW,IAAMF,EAAMG,UAAY,IAAMH,EAAMI,aAC3D,YAAnBX,IAAkC,WAAY,QAAS,YAAYY,QAAQL,EAAML,WAAa,IAC9FC,EAAQU,KAAKT,GAGrBA,EAASA,EAAOC,cAWpB,OARAF,EAAQU,KAAKd,EAAGe,cAAcC,MAG1BhB,EAAGe,gBAAkBE,UACrBb,EAAQU,KAAKd,EAAGe,cAAcG,aAGlCd,EAAQU,KAAKzF,QACN+E,GAGXpF,EAAAmG,SAAA,SAAyBC,EAAeC,GACpC,IAAI5B,OAAkBC,EACtB,OAAO,gBACYA,GAAXD,IACApE,OAAOwE,aAAaJ,GACpBA,OAAUC,QAGCA,GAAXD,IACAA,EAAUpE,OAAOyE,WAAW,WACxBuB,IACA5B,OAAUC,GACX0B,MAMfpG,EAAAsG,4BAAA,SAA4CC,EAAwBC,GAChE,IAAMxF,EAAIuF,EAAUE,wBACdC,EAAIF,EAAQC,wBAElB,OAAIC,EAAEC,OAAS3F,EAAE4F,IAEN,SAGPF,EAAEE,IAAM5F,EAAE2F,OAEH,SAGPD,EAAEE,IAAM5F,EAAE4F,KAAOF,EAAEC,QAAU3F,EAAE2F,OACxB,cAGPD,EAAEE,KAAO5F,EAAE4F,KAAOF,EAAEC,OAAS3F,EAAE2F,OACxB,iBAGJ,WAKX3G,EAAA6G,MAAA,SAAsBtC,GAClB,OAAOA,oBC/IXtE,EAAAD,QAAAM,mBCCAL,EAAAD,SAAkB8G,cAAA,cAAAC,WAAA,cAAAC,YAAA,YAAAC,SAAA,YAAAC,WAAA,WAAAC,QAAA,WAAAC,aAAA,aAAAC,UAAA,aAAAC,mBAAA,mBAAAC,eAAA,mBAAAC,aAAA,aAAAC,UAAA,aAAAC,aAAA,aAAAC,UAAA,aAAAC,WAAA,WAAAC,QAAA,WAAAC,eAAA,eAAAC,WAAA,eAAAC,YAAA,YAAAC,SAAA,YAAAC,gBAAA,gBAAAC,aAAA,gBAAAC,eAAA,eAAAC,YAAA,eAAAC,cAAA,cAAAC,WAAA,cAAAC,wBAAA,wBAAAC,mBAAA,wBAAAC,6BAAA,6BAAAC,wBAAA,6BAAAC,6BAAA,6BAAAC,wBAAA,6BAAAC,mCAAA,mCAAAC,6BAAA,mCAAAC,qBAAA,qBAAAC,iBAAA,qBAAAC,WAAA,WAAAC,QAAA,WAAAC,cAAA,cAAAC,WAAA,cAAAC,cAAA,cAAAC,WAAA,cAAAC,aAAA,aAAAC,UAAA,aAAAC,eAAA,eAAAC,YAAA,eAAAC,WAAA,WAAAC,QAAA,6BCDlB,IAAAC;;;;;;;;;;;CAOA,WACA,aAEA,IAAAC,KAAgBvH,eAEhB,SAAAI,IAGA,IAFA,IAAAoH,KAEArJ,EAAA,EAAiBA,EAAAsC,UAAAC,OAAsBvC,IAAA,CACvC,IAAAsJ,EAAAhH,UAAAtC,GACA,GAAAsJ,EAAA,CAEA,IAAAC,SAAAD,EAEA,cAAAC,GAAA,WAAAA,EACAF,EAAAlE,KAAAqE,WAAAF,YACI,GAAAG,MAAAC,QAAAJ,GACJD,EAAAlE,KAAAlD,EAAA+B,MAAAwF,KAAAF,SACI,cAAAC,EACJ,QAAAhI,KAAA+H,EACAF,EAAAjJ,KAAAmJ,EAAA/H,IAAA+H,EAAA/H,IACA8H,EAAAlE,KAAAqE,WAAAjI,QAMA,OAAA8H,EAAAM,KAAA,UAGA,IAAArK,KAAAD,SACA4C,EAAA2H,QAAA3H,EACA3C,EAAAD,QAAA4C,QAKG8B,KAFHoF,EAAA,WACA,OAAAlH,GACG+B,MAAA3E,SAAAC,EAAAD,QAAA8J,GArCH,izDCPA,IAAAU,EAAA/J,EAAA,GAEAkC,EAAAlC,EAAA,GACAmC,EAAAnC,EAAA,GACAgK,EAAAhK,EAAA,GACAiK,EAAAjK,EAAA,GACAkK,EAAAlK,EAAA,GACAmK,EAAAnK,EAAA,GACAoK,EAAApK,EAAA,IAEIoC,EAAKD,EAAWT,KAAKQ,GA2DzBmI,EAAA,SAAAC,GAyBI,SAAAD,EAAYE,GAAZ,IAAAC,EACIF,EAAAjK,KAAAqJ,KAAMa,IAAMb,YA8ShBc,EAAAC,8BAAgC,SAACC,GAC7B,IAAMC,EAAWH,EAAKI,MAAMC,eACtBC,EAASN,EAAKI,MAAME,OAAOC,QAEjCJ,EAASK,OACT,IAAK,IAAI9K,EAAI,EAAGA,EAAIyK,EAASlI,OAAQvC,IACjC4K,EAAOG,OAAON,EAASzK,GAAKA,EAAG,GAEnCsK,EAAKU,UAAUJ,OAAQA,EAAQD,kBAAoBM,YAAaL,EAAOrI,OAAS,EAAI,GAAK,IACrFqI,EAAOrI,OAAS,EAChB+H,EAAKY,UAAUC,QAAQC,QAEvBd,EAAKe,eAIbf,EAAAgB,eAAiB,SAACC,GAAkB,gBAACf,GACjCF,EAAKkB,oBAAoBD,KAG7BjB,EAAAmB,cAAgB,SAACjB,GACb,IAAIe,EAAQ,EACRjB,EAAKI,MAAMC,eAAepI,OAAS,IACnCgJ,EAAQjB,EAAKI,MAAMC,eAAe,IAEtCL,EAAKoB,eAAeH,GACpBjB,EAAKU,UAAUW,SAAS,KAG5BrB,EAAAsB,aAAe,SAACpB,GACZF,EAAKoB,gBAAgB,GACrBpB,EAAKU,UAAUW,SAAS,KAG5BrB,EAAAuB,gBAAkB,SAACrB,GACf,IAAMI,EAASN,EAAKI,MAAME,OACpBkB,EAASxB,EAAKI,MAAMO,YAI1B,OAAQT,EAAMjJ,KACV,KAAKyI,EAAAxH,IAAIG,UACDmJ,EAAS,GACTxB,EAAKoB,eAAeI,EAAS,GAEjCtB,EAAMuB,iBACN,MAEJ,KAAK/B,EAAAxH,IAAII,WACDkJ,EAASlB,EAAOrI,OAAS,GACzB+H,EAAKoB,eAAeI,EAAS,GAEjCtB,EAAMuB,iBACN,MAEJ,KAAK/B,EAAAxH,IAAIW,SAKT,KAAK6G,EAAAxH,IAAIU,OAELsH,EAAMuB,iBACN,MAEJ,KAAK/B,EAAAxH,IAAIQ,KACLsH,EAAKoB,eAAe,GACpBlB,EAAMuB,iBACN,MAEJ,KAAK/B,EAAAxH,IAAIS,IACLqH,EAAKoB,eAAed,EAAOrI,OAAS,GACpCiI,EAAMuB,iBACN,MAEJ,KAAK/B,EAAAxH,IAAIK,MACLyH,EAAKkB,oBAAoBM,GACzBtB,EAAMuB,mBAOlBzB,EAAA0B,sBAAwB,SAACT,GAAkB,gBAACf,GACxCF,EAAK2B,mBAAmBV,GACxBf,EAAMuB,mBAGVzB,EAAA4B,wBAA0B,SAACX,GAAkB,gBAACf,GACtCF,EAAKI,MAAMyB,oBAAsBZ,GACjCjB,EAAK8B,sBAAsBb,GAE/Bf,EAAMuB,mBAGVzB,EAAA+B,yBAA2B,SAACd,GAAkB,gBAACf,GACvCF,EAAKgC,kBAAoB9B,EAAM+B,SAAWjC,EAAKkC,kBAAoBhC,EAAMiC,UAO7EnC,EAAKgC,iBAAmB9B,EAAM+B,QAC9BjC,EAAKkC,iBAAmBhC,EAAMiC,QAC1BnC,EAAKI,MAAMyB,oBAAsBZ,GACjCjB,EAAK8B,sBAAsBb,MAInCjB,EAAA8B,sBAAwB,SAACb,GACrBjB,EAAKU,UAAUmB,mBAAoBZ,KAGvCjB,EAAAoC,gBAAkB,SAAClC,GACf,IAAMmC,EAAUrC,EAAKI,MAAMkC,cAE3B,GAAKD,KAAWA,EAAQpK,OAAS,GAAjC,CAIA,IAAMuJ,EAASxB,EAAKI,MAAMyB,mBAE1B,OAAQ3B,EAAMjJ,KACV,KAAKyI,EAAAxH,IAAIE,QACDoJ,EAAS,GACTxB,EAAK8B,sBAAsBN,EAAS,GAExCtB,EAAMuB,iBACN,MAEJ,KAAK/B,EAAAxH,IAAIC,UACDqJ,EAASa,EAAQpK,OAAS,GAC1B+H,EAAK8B,sBAAsBN,EAAS,GAExCtB,EAAMuB,iBACN,MAEJ,KAAK/B,EAAAxH,IAAIW,SAKT,KAAK6G,EAAAxH,IAAIU,OAELsH,EAAMuB,iBACN,MAEJ,KAAK/B,EAAAxH,IAAIQ,KACLsH,EAAK8B,sBAAsB,GAC3B5B,EAAMuB,iBACN,MAEJ,KAAK/B,EAAAxH,IAAIS,IACLqH,EAAK8B,sBAAsBO,EAAQpK,OAAS,GAC5CiI,EAAMuB,iBACN,MAEJ,KAAK/B,EAAAxH,IAAIe,OACL+G,EAAKuC,QACLrC,EAAMuB,iBACN,MAEJ,KAAK/B,EAAAxH,IAAIM,MACLwH,EAAK2B,mBAAmB3B,EAAKI,MAAMyB,uBAM/C7B,EAAAwC,KAAO,WACHxC,EAAKyC,OAAO,IAAI,GAChBzC,EAAKe,eA6BTf,EAAA0C,oBAAsB,SAACxC,GACnBF,EAAKU,UAAUW,SAAS,KAG5BrB,EAAA2C,mBAAqB,SAACzC,GAClBF,EAAKU,UAAUW,SAAS,KAS5BrB,EAAA4C,cAAgB,SAAC1C,GAEbF,EAAKU,UAAUW,SAAS,IACpBrB,EAAKD,MAAM8C,oBAAsB7C,EAAK8C,6BACtC9C,EAAKwC,OAGTxC,EAAK8C,6BAA8B,GAGvC9C,EAAA+C,aAAe,SAAC7C,GACZF,EAAKU,UAAUW,SAAS,EAAOmB,MAAM,EAAOC,OAAQ,MA0ExDzC,EAAAgD,gBAAkB,SAAC9C,GACf,IAAMvJ,EAAQuJ,EAAM+C,OAAOtM,MAC3BqJ,EAAKyC,OAAO9L,GAAO,IA+CvBqJ,EAAAkD,iBAAmB,SAAChD,GAChB,GAAKF,EAAKI,MAAM+C,oBAAhB,CAGA,IAAMC,EAAOpD,EAAKqD,mBAAmBxC,QAC/ByC,EAAOtD,EAAKuD,YAAY1C,QAGX,WADApB,EAAKpE,4BAA4BiI,EAAMF,IAEtDpD,EAAKwD,eAMbxD,EAAAyD,SAAW,SAACxC,GAAkB,gBAACf,GAC3B,IAAMwD,EAAY1D,EAAKI,MAAME,OACvBqD,EAAY3D,EAAKI,MAAME,OAAOC,QAC9BqD,EAAeD,EAAUlD,OAAOQ,EAAO,GAAG,GAE5CjB,EAAKD,MAAM8D,gBACX7D,EAAKD,MAAM8D,eAAeD,EAAcF,EAAWC,GAGnD3D,EAAKD,MAAM+D,iBACX9D,EAAKD,MAAM+D,gBAAgBH,EAAWD,GAG1C1D,EAAKU,UAAUJ,OAAQqD,GAAY,WAE/B,GAAgC,GAA5B3D,EAAKI,MAAME,OAAOrI,OAClB+H,EAAKe,kBACF,CACH,IAAMT,EAASN,EAAKI,MAAME,OACtByD,EAAQ9C,EACR8C,GAASzD,EAAOrI,SAChB8L,EAAQzD,EAAOrI,OAAS,GAE5B+C,SAASgJ,eAAehE,EAAKiE,cAAcF,IAAQjD,aA8B/Dd,EAAAkE,yBAA2B,SAAChE,GACxBF,EAAKmE,cAAgBnE,EAAKI,MAAMoC,MAGpCxC,EAAAoE,cAAgB,SAAClE,GACTF,EAAKmE,cACLnE,EAAKuC,QAELvC,EAAKwC,OAETxC,EAAKe,eAztBLf,EAAKqE,GAAK,YAAc3E,EAAAxG,OACxB8G,EAAKsE,WAAa/E,EAAMgF,YACxBvE,EAAKuD,YAAchE,EAAMgF,YACzBvE,EAAKY,UAAYrB,EAAMgF,YACvBvE,EAAKwE,UAAYjF,EAAMgF,YACvBvE,EAAKqD,mBAAqB9D,EAAMgF,YAChCvE,EAAK8C,6BAA8B,EAEnC9C,EAAKyE,eAAehF,EAAKrG,SAAS4G,EAAKD,MAAM2E,YAAa1E,EAAK2E,MAAO3E,GAEtEA,EAAKI,OACDiB,SAAS,EACTmB,MAAM,EAENlC,OAAQP,EAAMO,OACdK,aAAc,EACdN,kBAEAoC,OAAQ,GACRmC,WAAY,EACZtC,mBAAe7I,EACfoL,wBAAoBpL,EACpBqL,sBAAsB,EACtBjD,oBAAqB,EACrBkD,0BAA0B,EAC1BC,sBAAsB,EACtB7B,qBAAqB,EACrB8B,4BAA4B,KAisBxC,OAvvBoCC,EAAArF,EAAAC,GA0DhCD,EAAAvI,UAAA6N,mBAAA,WACI3F,EAAS4F,cAGbvF,EAAAvI,UAAA+N,mBAAA,SAAmBC,EAAgCC,GAE/C,GAAIA,EAAU1D,oBAAsB3C,KAAKkB,MAAMyB,mBAE3C,GAAI3C,KAAKkB,MAAMyB,oBAAsB,GAC9B3C,KAAKkB,MAAMkC,cAAcrK,OAAS,GAClCiH,KAAKkB,MAAMyB,oBAAuB3C,KAAKkB,MAAMkC,cAAcrK,OAAS,GACpEiH,KAAKkB,MAAM+C,oBAAqB,CAGnC,IAAMG,EAAOpE,KAAKqE,YAAY1C,QACxB9G,EAAKmF,KAAKmE,mBAAmBxC,QAEnCyC,EAAKkC,UAAYzL,EAAG0L,UAAY1L,EAAG2L,aAAepC,EAAKqC,kBAMpD,GAAIzG,KAAKkB,MAAMyB,oBAAsB,EAAG,CAE3C,IAAMwC,EAAKnF,KAAK0G,qBAAqB1G,KAAKkB,MAAMyB,oBAEhD,GAAU,OADJ9H,EAAKiB,SAASgJ,eAAeK,IACnB,CACZ,IAEMtO,GAFAuN,EAAOpE,KAAKqE,YAAY1C,SAEfrF,wBACTC,EAAI1B,EAAGyB,wBAEb,GAAIC,EAAEE,IAAM5F,EAAE4F,KAAOF,EAAEC,QAAU3F,EAAE2F,OAAQ,CACvC,IAAMmK,EAAQ9P,EAAE4F,IAAMF,EAAEE,IACxB2H,EAAKkC,UAAYlC,EAAKkC,UAAYK,EAItC,GAAIpK,EAAEE,KAAO5F,EAAE4F,KAAOF,EAAEC,OAAS3F,EAAE2F,OAAQ,CACjCmK,EAAQpK,EAAEC,OAAS3F,EAAE2F,OAC3B4H,EAAKkC,UAAYlC,EAAKkC,UAAYK,MAStDhG,EAAAvI,UAAAwO,OAAA,eAAA9F,EAAAd,KACUa,EAAQb,KAAKa,MACbgG,EAAOnG,EAAAoG,WAAWjG,EAAMiG,YACxB5F,EAAQlB,KAAKkB,MACb6F,EAAW/G,KAAKgH,iBAChBC,EAAajH,KAAKkH,mBAClBC,EAA4C,mBAAvBtG,EAAiB,YAAmBA,EAAMsG,cAAgBtG,EAAMsG,YACrFC,EAA4C,mBAAvBvG,EAAiB,YAAmBA,EAAMuG,cAAgBvG,EAAMuG,YAC3F,OACI/G,EAAAgH,cAAA,OAAKC,IAAKtH,KAAKoF,WAAYD,GAAInF,KAAKmF,GAAI3M,MAAOqI,EAAMrI,MAAO+O,UACxD7O,EAAGF,EAAMsE,SAAUtE,EAAMoE,YACrB8B,wBAAyBwC,EAAM4E,qBAC/B5G,WAAYgC,EAAMiB,QAClBnD,QAASkC,EAAMoC,QAEnBjD,EAAAgH,cAAA,OAAKE,UAAW/O,EAAMwE,SACjBkE,EAAME,OAAOoG,IAAI,SAAC/P,EAAOsK,GACtB,OAAO1B,EAAAgH,cAAA,SAAOtP,IAAKgK,EAAO0F,KAAK,SAAS1Q,KAAM8J,EAAM9J,KAAMU,MAAOqJ,EAAK4G,UAAUjQ,OAGnFyJ,EAAME,OAAOrI,OAAS,GACvBsH,EAAAgH,cAAChH,EAAMsH,SAAQ,KACXtH,EAAAgH,cAAA,SAAOE,UAAW/O,EAAMwF,aAAcmH,GAAInF,KAAK4H,uBAC1CT,GAEL9G,EAAAgH,cAAA,OAAKC,IAAKtH,KAAK0B,UACV6F,UAAW/O,EAAM4E,eACjByK,SAAU,EACVC,KAAK,UAASC,mBACG,aAAYC,wBACNhI,KAAK+E,cAAc7D,EAAMO,aAAYwG,uBACvC,OAAMC,aACff,EAAWgB,kBACNnI,KAAK4H,sBACtBQ,UAAWpI,KAAKqC,gBAChBgG,QAASrI,KAAKiC,cACdqG,OAAQtI,KAAKoC,cACblB,EAAME,OAAOoG,IAAI,SAAC/P,EAAOsK,GACtB,IAAMd,EAAWC,EAAMC,eAAezF,QAAQqG,IAAU,EAClDO,EAASpB,EAAMO,aAAeM,EAC9BoD,EAAKrE,EAAKiE,cAAchD,GACxBlC,EAAUnH,EAAGF,EAAMkF,SAAU4B,UAAWgD,EAAQ9C,YAAayB,IACnE,OACIZ,EAAAgH,cAAA,OAAKtP,IAAKgK,EACLoD,GAAIA,EACJoC,UAAW1H,EACXiI,KAAK,SAAQS,gBACEtH,EAAQiH,aACXpH,EAAK0H,aAAa/Q,GAC9BgR,QAAS3H,EAAKgB,eAAeC,IAC9B1B,EAAAgH,cAAA,OAAKE,UAAW/O,EAAM4G,YACjB0B,EAAK4H,gBAAgBjR,SAS7C+I,EAAA9D,MAAM,WAIH,IAAMiM,EAAWzH,EAAMC,eAAepI,OAAS,EACzCwO,EAAY7O,EAAGF,EAAM8E,WAAYU,aAAckD,EAAME,OAAOrI,OAAS,IAC3E,OACIsH,EAAAgH,cAAA,UAAQE,UAAWA,EACXkB,QAAS3H,EAAKC,8BACdsH,QAASvH,EAAK0C,oBACd8E,OAAQxH,EAAK2C,mBACbkF,SAAUA,EAAQC,gBACHD,EACfE,MAAOhC,EAAKiC,qBAChBzI,EAAAgH,cAAA,YACIhH,EAAAgH,cAAC0B,GAAWC,OAAQ,GAAIC,MAAO,SAM/C5I,EAAAgH,cAAA,SAAO6B,QAASnC,EAAUQ,UAAW/O,EAAMwF,cACtCoJ,GAEL/G,EAAAgH,cAAA,SAAOC,IAAKtH,KAAKsF,UACViC,UAAW/O,EAAMgF,UACjBiK,KAAK,OACLtC,GAAI4B,EACJtP,MAAOyJ,EAAMqC,OACb4F,SAAUnJ,KAAK8D,gBACfsE,UAAWpI,KAAKkD,gBAChBmF,QAASrI,KAAK0D,cACd4E,OAAQtI,KAAK6D,aACbiE,KAAK,WAAUsB,oBACG,OAAMC,gBACV,OAAMC,YACTrC,EAAUsC,gBACNtC,EAAUuC,gBACVtI,EAAMoC,KAAI0E,wBACFhI,KAAK0G,qBAAqBxF,EAAMyB,oBAAmB8G,YAC/DvI,EAAM4E,wBAM5BzF,EAAAgH,cAAA,OAAKE,UAAW/O,EAAM0E,UAASwM,eACb,EACbC,mBAAoB3J,KAAKgF,yBACzByD,QAASzI,KAAKkF,eACf7E,EAAAgH,cAACuC,GAAWZ,OAAQ,GAAIC,MAAO,MAGlC/H,EAAMoC,MACPjD,EAAAgH,cAAC5G,EAAAoJ,UAASC,QAAS9J,KAAKoF,WAAWzD,QAAS4F,UAAW/O,EAAM0F,aAEzDmC,EAAAgH,cAAA,OAAKE,UAAW/O,EAAMwE,QAAU,IAAMxE,EAAMsG,iBACvCtG,OAAQuR,UAAW,SACnBzC,IAAKtH,KAAKqE,YAAWoF,YACVvI,EAAM4E,qBACjBX,GAAI8B,EACJ+C,SAAUhK,KAAKgE,kBACf9C,EAAMkC,eAAiBlC,EAAMkC,cAAcrK,OAAS,GAEjDsH,EAAAgH,cAAA,OAAKE,UAAW/O,EAAM4F,WACjB0J,KAAK,UAASE,wBACShI,KAAK0G,qBAAqBxF,EAAMyB,qBAEpDzB,EAAMkC,cAAcoE,IAAI,SAACyC,EAAMzT,GAC3B,IAAM+Q,EAAY7O,EAAGF,EAAMkF,SAAU4B,UAAW4B,EAAMyB,oBAAsBnM,IAC5E,OACI6J,EAAAgH,cAAA,OAAKtP,IAAKvB,EACL+Q,UAAWA,EACXpC,GAAIrE,EAAK4F,qBAAqBlQ,GAC9B0T,YAAapJ,EAAK4B,wBAAwBlM,GAC1C2T,YAAarJ,EAAK+B,yBAAyBrM,GAC3C4T,UAAWtJ,EAAK0B,sBAAsBhM,GACtCsR,KAAK,SAAQS,gBACErH,EAAMyB,qBAAuBnM,GAE5CsK,EAAKuJ,iBAAiBJ,OAO9C/I,EAAM2E,0BACPxF,EAAAgH,cAAA,OAAKE,UAAW/O,EAAM8F,oBAAqBuI,EAAKyD,oBAE9CpJ,EAAM4E,sBAAwB5E,EAAM+C,sBACtC5D,EAAAgH,cAAA,OAAKC,IAAKtH,KAAKmE,mBACVoD,UAAW7O,EAAGF,EAAMkG,wBAAyBlG,EAAMgG,0BAA2BqI,EAAKf,wBAEtF5E,EAAgC,4BAClCb,EAAAgH,cAAA,OAAKE,UAAW7O,EAAGF,EAAMoG,6BAA8BpG,EAAMgG,0BACxDqI,EAAK0D,yBAAyBrJ,EAAMqC,OAAOxK,OAAQ8H,EAAM2J,wBAWlF7J,EAAAvI,UAAAsP,UAAA,SAAUuC,GACN,MAAiC,mBAAtBjK,KAAKa,MAAM4J,OACXzK,KAAKa,MAAM4J,OAAOR,GAElB,GAAKA,EAAKjK,KAAKa,MAAM4J,SAIpC9J,EAAAvI,UAAAsQ,gBAAA,SAAgBuB,GACZ,MAAuC,mBAA5BjK,KAAKa,MAAM6J,aACX1K,KAAKa,MAAM6J,aAAaT,GAExBA,EAAKjK,KAAKa,MAAM6J,eAI/B/J,EAAAvI,UAAAoQ,aAAA,SAAayB,GACT,MAAoC,mBAAzBjK,KAAKa,MAAM8J,UACX3K,KAAKa,MAAM8J,UAAUV,GAErB,GAAKA,EAAKjK,KAAKa,MAAM8J,YAIpChK,EAAAvI,UAAAiS,iBAAA,SAAiBJ,GACb,OAAIjK,KAAKa,MAAM+J,cAC6B,mBAA7B5K,KAAKa,MAAM+J,cACX5K,KAAKa,MAAM+J,cAAcX,GAEzBA,EAAKjK,KAAKa,MAAM+J,eAGpB5K,KAAK0I,gBAAgBuB,IAIpCtJ,EAAAvI,UAAA8J,eAAA,SAAeH,GACX/B,KAAKwB,UAAUC,YAAaM,KAGhCpB,EAAAvI,UAAA4J,oBAAA,SAAoBD,GAChB,IAAM8I,EAAc7K,KAAKkB,MAAMC,eACzB2J,EAAcD,EAAYxJ,QAC1B0J,EAAMF,EAAYnP,QAAQqG,GAC5BgJ,GAAO,EACPD,EAAYvJ,OAAOwJ,EAAK,GAExBD,EAAYnP,KAAKoG,GAErB/B,KAAKwB,UAAUL,eAAgB2J,EAAarJ,YAAaM,KAoL7DpB,EAAAvI,UAAAiL,MAAA,WACIrD,KAAKwB,UACD8B,MAAM,EACNF,mBAAe7I,EACfoI,oBAAqB,EACrBkD,0BAA0B,EAC1BC,sBAAsB,EACtBvC,OAAQ,MAKhB5C,EAAAvI,UAAAqK,mBAAA,SAAmBV,GACf,IAAMd,EAAWjB,KAAKkB,MAAMkC,cAAcrB,GACpCX,EAASpB,KAAKkB,MAAME,OAAOC,QACjCD,EAAOzF,KAAKsF,GACZjB,KAAKwB,UACDJ,OAAQA,IAEZpB,KAAKqD,QAEL,IAAM2H,EAAQhL,KAAKwI,aAAavH,GAChCX,EAAS2K,SAASvK,EAAAoG,WAAW9G,KAAKa,MAAMiG,YAAYoE,WAAWF,KAanErK,EAAAvI,UAAAyJ,YAAA,WACI7B,KAAK4D,6BAA8B,EACnC5D,KAAKsF,UAAU3D,QAAQC,SAkBrBjB,EAAAvI,UAAAmL,OAAN,SAAa9L,EAAeyC,gFAoBxB,OAnBM2G,EAAQb,KAAKa,MACbgG,EAAOnG,EAAAoG,WAAWjG,EAAMiG,YACxBpB,EAAa,EAEbyF,EAA4B1T,EAAMsB,QAAUiH,KAAKa,MAAM2J,kBAE7DxK,KAAKwB,UACD4B,mBAAe7I,EACfoL,wBAAoBpL,EACpBgJ,OAAQ9L,EACRiO,WAAYA,EACZI,qBAAsBqF,EACtBtF,0BAA0B,EAC1BvC,MAAM,EACNX,oBAAqB,EACrBsB,qBAAqB,EACrB8B,4BAA6BoF,IAG5BA,GAOL7K,EAAS2K,SAASpE,EAAKf,wBAEnB5L,EACA8F,KAAKuF,eAAe9N,EAAOiO,GAE3B1F,KAAKyF,MAAMhO,EAAOiO,SAVlBpF,EAAS2K,SAASpE,EAAK0D,yBAAyB9S,EAAMsB,OAAQiH,KAAKa,MAAM2J,qBACzE,SAgBF7J,EAAAvI,UAAAqN,MAAN,SAAYlC,EAAe6H,qGAGJ,6BADTvE,EAAOnG,EAAAoG,WAAW9G,KAAKa,MAAMiG,aACpB,EAAM9G,KAAKa,MAAM4E,MAAMlC,EAAQ6H,kBAAxCC,EAASC,EAAAC,OACXC,KACJH,EAAOjK,OAAOqK,QAAQ,WAClBD,EAAmB7P,KAAK6E,EAAAxG,UAGxBqR,EAAOjK,OAAOrI,OAAS,GACvBuH,EAAS2K,SAASpE,EAAKyD,mBAG3BtK,KAAKwB,UACD4B,cAAeiI,EAAOjK,OACtBuE,mBAAoB6F,EACpB5F,qBAAsByF,EAAOnH,KAC7BvB,mBAAoB0I,EAAOjK,OAAOrI,OAAS,EAAI,GAAK,EACpD8M,yBAA0BwF,EAAOjK,OAAOrI,OAAS,EACjD+M,sBAAsB,EACtB7B,oBAAqBoH,EAAOnH,KAC5BwB,WAAY,8DAelB/E,EAAAvI,UAAAkM,WAAN,mHACI,GAAItE,KAAKkB,MAAM4E,qBACX,UAEEe,EAAOnG,EAAAoG,WAAW9G,KAAKa,MAAMiG,YAC7BsE,EAAOpL,KAAKkB,MAAMwE,WAAa,EAC/BjO,EAAQuI,KAAKsF,UAAU3D,QAAQlK,MACrCuI,KAAKwB,UACDsE,sBAAsB,IAG1BxF,EAAS2K,SAASpE,EAAKf,yCAGJ,gCAAM9F,KAAKa,MAAM4E,MAAMhO,EAAO2T,kBAAvCC,EAASC,EAAAC,OACTG,EAAqB1L,KAAKkB,MAAMyE,mBAAmBtE,QACnDsK,EAAgB3L,KAAKkB,MAAMkC,cAAc/B,QAC/CgK,EAAOjK,OAAOqK,QAAQ,SAACJ,GACnBM,EAAchQ,KAAK0P,GACnBK,EAAmB/P,KAAK6E,EAAAxG,UAGxBqR,EAAOjK,OAAOrI,OAAS,GAEvBuH,EAAS2K,SAASpE,EAAKyD,mBAG3BtK,KAAKwB,UACD4B,cAAeuI,EACfhG,mBAAoB+F,EACpB9F,qBAAsByF,EAAOnH,KAC7B4B,sBAAsB,EACtB7B,oBAAqBoH,EAAOnH,KAC5BwB,WAAY0F,8DAuDxBzK,EAAAvI,UAAAwP,oBAAA,WACI,OAAO5H,KAAKmF,GAAK,iBAIrBxE,EAAAvI,UAAA4O,eAAA,WACI,OAAOhH,KAAKmF,GAAK,WAGrBxE,EAAAvI,UAAA8O,iBAAA,WACI,OAAOlH,KAAKmF,GAAK,aAIrBxE,EAAAvI,UAAA2M,cAAA,SAAchD,GACV,YAAkBxH,IAAVwH,GAAuBA,EAAQ,OAAKxH,EAAYyF,KAAKmF,GAAK,UAAYpD,GAGlFpB,EAAAvI,UAAAsO,qBAAA,SAAqB3E,GACjB,YAAkBxH,IAAVwH,GAAuBA,EAAQ,OACnCxH,EACAyF,KAAKmF,GAAK,WAAanF,KAAKkB,MAAMyE,mBAAmB5D,IAruBtDpB,EAAAiL,cACH9E,WAAY,QACZnD,mBAAmB,EACnB6G,kBAAmB,EACnBhF,aAAa,GAivBrB7E,EAvvBA,CAAoCN,EAAMwL,eAA7BhW,EAAA8K,cA0vBb,IAAAiJ,EAAA,SAAAhJ,GAAA,SAAAgJ,mDASA,OATyB5D,EAAA4D,EAAAhJ,GACrBgJ,EAAAxR,UAAAwO,OAAA,WACI,IAAMkF,EAAU,OAAS9L,KAAKa,MAAMoI,MAAQ,IAAMjJ,KAAKa,MAAMmI,OAC7D,OAAO3I,EAAAgH,cAAA,OAAK2B,OAAQhJ,KAAKa,MAAMmI,OAAQC,MAAOjJ,KAAKa,MAAMoI,MAAO6C,QAASA,EAASjE,UAAW,EACjFkE,UAAU,SAClB1L,EAAAgH,cAAA,QACIvQ,EAAE,4RAGlB8S,EATA,CAAyBvJ,EAAMwL,eAW/B9C,EAAA,SAAAnI,GAAA,SAAAmI,mDASA,OATyB/C,EAAA+C,EAAAnI,GACrBmI,EAAA3Q,UAAAwO,OAAA,WACI,IAAMkF,EAAU,OAAS9L,KAAKa,MAAMoI,MAAQ,IAAMjJ,KAAKa,MAAMmI,OAC7D,OAAO3I,EAAAgH,cAAA,OAAK2B,OAAQhJ,KAAKa,MAAMmI,OAAQC,MAAOjJ,KAAKa,MAAMoI,MAAO6C,QAASA,EAASjE,UAAW,EACjFkE,UAAU,SAClB1L,EAAAgH,cAAA,QACIvQ,EAAE,iWAGlBiS,EATA,CAAyB1I,EAAMwL,+FC10B/BhW,EAAAqQ,WAAA,WACI,IAAIpK,SAASgJ,eAAe,YAA5B,CAIA,IAAMkH,EAAOlQ,SAASuL,cAAc,OACpC2E,EAAKC,aAAa,KAAM,YACxBD,EAAKC,aAAa,QAAS,0BAC3BnQ,SAASD,KAAKqQ,YAAYF,GAE1B,IAAMG,EAAYrQ,SAASuL,cAAc,OACzC8E,EAAUF,aAAa,KAAM,sBAC7BE,EAAUF,aAAa,OAAQ,OAC/BE,EAAUF,aAAa,YAAa,aACpCE,EAAUF,aAAa,gBAAiB,aACxCD,EAAKE,YAAYC,GAEjB,IAAMC,EAAStQ,SAASuL,cAAc,OACtC+E,EAAOH,aAAa,KAAM,mBAC1BG,EAAOH,aAAa,OAAQ,OAC5BG,EAAOH,aAAa,YAAa,UACjCG,EAAOH,aAAa,gBAAiB,aACrCD,EAAKE,YAAYE,KAIrBvW,EAAAwW,YAAA,SAA4BC,GACxB,IAAMC,EAAOzQ,SAASuL,cAAc,OACpCkF,EAAKL,YAAYpQ,SAAS0Q,eAAeF,IACzCxQ,SAASgJ,eAAe,sBAAsBoH,YAAYK,GAK1D,IAAMP,EAAOlQ,SAASgJ,eAAe,YACrCkH,EAAK1F,UAAY0F,EAAKS,cAI1B5W,EAAAoV,SAAA,SAAyBqB,GACrB,IAAMC,EAAOzQ,SAASuL,cAAc,OACpCkF,EAAKL,YAAYpQ,SAAS0Q,eAAeF,IACzCxQ,SAASgJ,eAAe,mBAAmBoH,YAAYK,GAIvD,IAAMP,EAAOlQ,SAASgJ,eAAe,YACrCkH,EAAK1F,UAAY0F,EAAKS,kcC/C1B,IAAApM,EAAA/J,EAAA,GACAiK,EAAAjK,EAAA,GACAoW,EAAApW,EAAA,GAQAuT,EAAA,SAAAjJ,GAOI,SAAAiJ,EAAYhJ,GAAZ,IAAAC,EACIF,EAAAjK,KAAAqJ,KAAMa,IAAMb,YA4ChBc,EAAA9F,SAAW,WACP,IACM2R,EADU7L,EAAKD,MAAMiJ,QACNxN,wBACf9D,EAAQ,uBACHmU,EAAKlQ,IAAMkQ,EAAK3D,OAAS9S,OAAO0W,aAAW,2BAC1CD,EAAKE,KAAO3W,OAAO4W,aAAW,2BAC7BH,EAAK1D,MAAK,gBAIvBnI,EAAK1E,UAAU6P,aAAa,QAASzT,IArDrCsI,EAAKiM,kBAAoBxM,EAAKvE,SAAS,GAAI8E,EAAK9F,YAuDxD,OAhE8BgL,EAAA6D,EAAAjJ,GAY1BiJ,EAAAzR,UAAA6N,mBAAA,WACIjG,KAAK5D,UAAYN,SAASuL,cAAc,OACxC,IAAM3O,EAAKsH,KAAKa,MAAM0G,UAClB7O,GACAsH,KAAK5D,UAAU6P,aAAa,QAASvT,GAEzCoD,SAASD,KAAKqQ,YAAYlM,KAAK5D,YAInCyN,EAAAzR,UAAA4U,qBAAA,eAAAlM,EAAAd,KACIA,KAAKiN,cAAcxB,QAAQ,SAACvQ,IACvB,SAAU,SAAU,aAAauQ,QAAQ,SAACzK,GACvC9F,EAAOgS,oBAAoBlM,EAAOF,EAAKiM,8BAGxC/M,KAAKiN,cACZnR,SAASD,KAAKsR,YAAYnN,KAAK5D,kBACxB4D,KAAK5D,WAIhByN,EAAAzR,UAAAwO,OAAA,WACI,OAAO8F,EAAAU,aAAapN,KAAKa,MAAMwM,SAAUrN,KAAK5D,YAGlDyN,EAAAzR,UAAAkV,kBAAA,eAAAxM,EAAAd,KACIA,KAAKiN,cAAgB1M,EAAK3F,iBAAiBoF,KAAKa,MAAMiJ,SACtD9J,KAAKiN,cAAcxB,QAAQ,SAACvQ,IACvB,SAAU,SAAU,aAAauQ,QAAQ,SAACzK,GACvC9F,EAAOqS,iBAAiBvM,EAAOF,EAAKiM,uBAG5C/M,KAAKhF,YAGT6O,EAAAzR,UAAA+N,mBAAA,WACInG,KAAKhF,YAeb6O,EAhEA,CAA8BxJ,EAAMwL,eAAvBhW,EAAAgU,0BCVb/T,EAAAD,QAAAO,iFCSA,IAAAoX,EAAA,oBAAAA,KAsBA,OApBIA,EAAApV,UAAAkS,gBAAA,WACI,MAAO,wBAGXkD,EAAApV,UAAA0N,qBAAA,WACI,MAAO,cAGX0H,EAAApV,UAAA0Q,kBAAA,WACI,MAAO,0BAGX0E,EAAApV,UAAA8S,WAAA,SAAWP,GACP,OAAOA,EAAY,UAGvB6C,EAAApV,UAAAmS,yBAAA,SAAyBkD,EAAaC,GAClC,IAAM/G,EAAQ+G,EAAMD,EACpB,MAAO,gBAAkB9G,EAAQ,mBAAqBA,EAAQ,EAAI,IAAM,KAEhF6G,EAtBA,GAwBMG,EAAe,IAAIC,IACzBD,EAAaE,IAAI,QAAS,IAAIL,GAE9B3X,EAAAiR,WAAA,SAA2BD,GACvB,IAAMiH,EAAWH,EAAatW,IAAI,SAElC,IAAKwP,EACD,OAAOiH,EAGX,GAAmB,iBAARjH,EAAkB,CACzB,IAAMkH,EAAWJ,EAAatW,IAAIwP,GAClC,OAAOkH,GAAsBD,EAE7B,OAAOjH","file":"select25.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"), require(\"react-dom\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\", \"react-dom\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"select25\"] = factory(require(\"react\"), require(\"react-dom\"));\n\telse\n\t\troot[\"select25\"] = factory(root[\"React\"], root[\"ReactDOM\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__1__, __WEBPACK_EXTERNAL_MODULE__9__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","import * as style from \"./select2.scss\";\r\nimport * as classNames from \"classnames/bind\";\r\nimport * as React from \"react\";\r\n\r\nexport const cn = classNames.bind(style);\r\n\r\nexport function extend(...params: object[]) {\r\n    for (var i = 1; i < arguments.length; i++)\r\n        for (var key in arguments[i])\r\n            if (arguments[i].hasOwnProperty(key)) {\r\n                if (typeof arguments[0][key] === 'object'\r\n                    && typeof arguments[i][key] === 'object')\r\n                    extend(arguments[0][key], arguments[i][key]);\r\n                else\r\n                    arguments[0][key] = arguments[i][key];\r\n            }\r\n    return arguments[0];\r\n}\r\n\r\nexport const Key = {\r\n    // https://www.w3.org/TR/uievents-key/#named-key-attribute-values\r\n    ArrowDown: \"ArrowDown\",\r\n    ArrowUp: \"ArrowUp\",\r\n    ArrowLeft: \"ArrowLeft\",\r\n    ArrowRight: \"ArrowRight\",\r\n    Space: \" \",\r\n    Enter: \"Enter\",\r\n    Tab: \"Tab\",\r\n    Home: \"Home\",\r\n    End: \"End\",\r\n    PageUp: \"PageUp\",\r\n    PageDown: \"PageDown\",\r\n    Backspace: \"Backspace\",\r\n    Delete: \"Delete\",\r\n    Clear: \"Clear\",\r\n    Escape: \"Escape\"\r\n}\r\n\r\nexport const uuid = (function () {\r\n    let counter = 0;\r\n    return function () {\r\n        return counter++;\r\n    }\r\n})();\r\n\r\n\r\nexport function debounce(quiet: number, delegate: (...args: any[]) => void, that: Object) {\r\n    var timeout: number = undefined;\r\n    if (quiet < 0) {\r\n        return function () {\r\n            delegate.apply(that, arguments);\r\n        }\r\n    } else {\r\n        return function () {\r\n            var args = arguments;\r\n            if (timeout) {\r\n                window.clearTimeout(timeout);\r\n            }\r\n            timeout = window.setTimeout(function () {\r\n                timeout = undefined;\r\n                delegate.apply(that, args);\r\n            }, quiet);\r\n        };\r\n    }\r\n}\r\n\r\nexport function getScrollParents(el: HTMLElement): EventTarget[] {\r\n    const style = window.getComputedStyle(el);\r\n    const elementPosition = style.position;\r\n    if (elementPosition == \"fixed\") {\r\n        return [el];\r\n    }\r\n\r\n    const parents = [];\r\n    let parent = el.parentElement;\r\n\r\n    while (parent && parent.nodeType == 1) {\r\n        const style = window.getComputedStyle(parent);\r\n        if (/(overlay|scroll|auto)/.test(style.overflow + \" \" + style.overflowX + \" \" + style.overflowY)) {\r\n            if (elementPosition != \"absolute\" || [\"relative\", \"fixed\", \"absolute\"].indexOf(style.position) >= 0) {\r\n                parents.push(parent);\r\n            }\r\n        }\r\n        parent = parent.parentElement;\r\n    }\r\n\r\n    parents.push(el.ownerDocument.body);\r\n\r\n    // iframe\r\n    if (el.ownerDocument !== document) {\r\n        parents.push(el.ownerDocument.defaultView);\r\n    }\r\n\r\n    parents.push(window);\r\n    return parents;\r\n}\r\n\r\nexport function throttle(delay: number, callback: () => void): () => void {\r\n    let timeout: number = undefined;\r\n    return function () {\r\n        if (timeout != undefined) {\r\n            window.clearTimeout(timeout);\r\n            timeout = undefined;\r\n        }\r\n\r\n        if (timeout == undefined) {\r\n            timeout = window.setTimeout(function () {\r\n                callback();\r\n                timeout = undefined;\r\n            }, delay);\r\n        }\r\n    };\r\n};\r\n\r\n\r\nexport function calculateVerticalVisibility(container: HTMLElement, element: HTMLElement): \"hidden\" | \"partial-top\" | \"partial-bottom\" | \"visible\" {\r\n    const c = container.getBoundingClientRect();\r\n    const e = element.getBoundingClientRect();\r\n\r\n    if (e.bottom < c.top) {\r\n        // above the fold\r\n        return \"hidden\";\r\n    }\r\n\r\n    if (e.top > c.bottom) {\r\n        // below the fold\r\n        return \"hidden\";\r\n    }\r\n\r\n    if (e.top < c.top && e.bottom <= c.bottom) {\r\n        return \"partial-top\";\r\n    }\r\n\r\n    if (e.top >= c.top && e.bottom > c.bottom) {\r\n        return \"partial-bottom\";\r\n    }\r\n\r\n    return \"visible\";\r\n\r\n}\r\n\r\n/** helper that makes it easier to declare a scope inside a jsx block */\r\nexport function scope(delegate: () => React.ReactChild) {\r\n    return delegate();\r\n}\r\n\r\n\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"s25-control\":\"s25-control\",\"s25Control\":\"s25-control\",\"s25-multi\":\"s25-multi\",\"s25Multi\":\"s25-multi\",\"s25-body\":\"s25-body\",\"s25Body\":\"s25-body\",\"s25-toggle\":\"s25-toggle\",\"s25Toggle\":\"s25-toggle\",\"s25-multi-values\":\"s25-multi-values\",\"s25MultiValues\":\"s25-multi-values\",\"s25-remove\":\"s25-remove\",\"s25Remove\":\"s25-remove\",\"s25-search\":\"s25-search\",\"s25Search\":\"s25-search\",\"s25-item\":\"s25-item\",\"s25Item\":\"s25-item\",\"s25-remove-x\":\"s25-remove-x\",\"s25RemoveX\":\"s25-remove-x\",\"s25-label\":\"s25-label\",\"s25Label\":\"s25-label\",\"s25-offscreen\":\"s25-offscreen\",\"s25Offscreen\":\"s25-offscreen\",\"s25-dropdown\":\"s25-dropdown\",\"s25Dropdown\":\"s25-dropdown\",\"s25-options\":\"s25-options\",\"s25Options\":\"s25-options\",\"s25-no-search-results\":\"s25-no-search-results\",\"s25NoSearchResults\":\"s25-no-search-results\",\"s25-search-results-message\":\"s25-search-results-message\",\"s25SearchResultsMessage\":\"s25-search-results-message\",\"s25-search-results-loading\":\"s25-search-results-loading\",\"s25SearchResultsLoading\":\"s25-search-results-loading\",\"s25-search-results-minimum-error\":\"s25-search-results-minimum-error\",\"s25SearchResultsMinimumError\":\"s25-search-results-minimum-error\",\"s25-search-results\":\"s25-search-results\",\"s25SearchResults\":\"s25-search-results\",\"s25-open\":\"s25-open\",\"s25Open\":\"s25-open\",\"s25-focused\":\"s25-focused\",\"s25Focused\":\"s25-focused\",\"s25-content\":\"s25-content\",\"s25Content\":\"s25-content\",\"s25-active\":\"s25-active\",\"s25Active\":\"s25-active\",\"s25-selected\":\"s25-selected\",\"s25Selected\":\"s25-selected\",\"s25-live\":\"s25-live\",\"s25Live\":\"s25-live\"};","/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(this && this[arg] || arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tclasses.push(classNames.apply(this, arg));\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(this && this[key] || key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","import * as React from \"react\";\r\nimport {CSSProperties} from \"react\";\r\nimport * as style from \"./select2.scss\";\r\nimport * as classNames from \"classnames/bind\";\r\nimport * as announce from \"./announce\";\r\nimport * as util from \"./util\";\r\nimport {Key, scope, uuid} from \"./util\";\r\nimport {Dropdown} from \"./dropdown\";\r\nimport {Dictionary, dictionary} from \"./dictionary\";\r\n\r\nlet cn = classNames.bind(style);\r\n\r\nexport interface QueryResult<T> {\r\n    values: T[],\r\n    more: boolean,\r\n}\r\n\r\ninterface MultiSelectProps<T> {\r\n    name: string;\r\n    values: T[];\r\n\r\n    itemId: ((item: T) => string) | (keyof T);\r\n    itemLabel: ((item: T) => string) | (keyof T);\r\n    valueContent: ((item: T) => (string | React.ReactChild)) | (keyof T);\r\n    resultContent?: ((item: T) => (string | React.ReactChild)) | (keyof T);\r\n\r\n    valuesLabel: (() => string) | string;\r\n    searchLabel: (() => string) | string;\r\n\r\n    query: (search: string, page: number) => Promise<QueryResult<T>>;\r\n\r\n    /*todo or react node*/\r\n    style?: CSSProperties;\r\n\r\n    // callbacks\r\n\r\n    onValuesChanged?: (values: T[], oldValues: T[]) => void;\r\n    onValueRemoved?: (value: T, newValues: T[], oldValues: T[]) => void;\r\n\r\n    // optional\r\n\r\n    dictionary: Dictionary | string;\r\n    openOnSearchFocus: boolean;\r\n    minimumCharacters: number;\r\n    quietMillis: number;\r\n\r\n}\r\n\r\ninterface MultiSelectState<T> {\r\n    focused: boolean;\r\n    open: boolean;\r\n\r\n    values: T[];\r\n    activeValue: number;\r\n    selectedValues: number[];\r\n\r\n    search: string;\r\n    searchPage: number;\r\n    searchResults: T[] | undefined;\r\n    searchResultDomIds: number[] | undefined;\r\n    searchResultsLoading: boolean;\r\n    searchHasMoreResults: boolean;\r\n    activeSearchResult: number;\r\n    showNoSearchResultsFound: boolean;\r\n    showLoadMoreResults: boolean;\r\n    showMinimumCharactersError: boolean;\r\n}\r\n\r\n\r\nexport class MultiSelect<T> extends React.PureComponent<MultiSelectProps<T>, MultiSelectState<T>> {\r\n\r\n    static defaultProps = {\r\n        dictionary: \"en_us\",\r\n        openOnSearchFocus: true,\r\n        minimumCharacters: 0,\r\n        quietMillis:-1\r\n    }\r\n\r\n\r\n    id: string;\r\n\r\n    searchRef: React.RefObject<HTMLInputElement>;\r\n    controlRef: React.RefObject<any>;\r\n    valuesRef: React.RefObject<HTMLDivElement>;\r\n    dropdownRef: React.RefObject<HTMLDivElement>;\r\n    loadingMoreResults: React.RefObject<HTMLDivElement>;\r\n    lastMouseClientX: number;\r\n    lastMouseClientY: number;\r\n\r\n    searchFocussedPragmatically: boolean;\r\n    toggleWasOpen: boolean;\r\n\r\n    queryDebounced: (search:string, page:number)=>void;\r\n\r\n    constructor(props: MultiSelectProps<T>) {\r\n        super(props);\r\n        this.id = \"s2-multi-\" + uuid();\r\n        this.controlRef = React.createRef();\r\n        this.dropdownRef = React.createRef();\r\n        this.valuesRef = React.createRef();\r\n        this.searchRef = React.createRef();\r\n        this.loadingMoreResults = React.createRef();\r\n        this.searchFocussedPragmatically = false;\r\n\r\n        this.queryDebounced=util.debounce(this.props.quietMillis, this.query, this);\r\n\r\n        this.state = ({\r\n            focused: false,\r\n            open: false,\r\n\r\n            values: props.values,\r\n            activeValue: -1,\r\n            selectedValues: [],\r\n\r\n            search: \"\",\r\n            searchPage: 0,\r\n            searchResults: undefined,\r\n            searchResultDomIds: undefined,\r\n            searchHasMoreResults: false,\r\n            activeSearchResult: -1,\r\n            showNoSearchResultsFound: false,\r\n            searchResultsLoading: false,\r\n            showLoadMoreResults: false,\r\n            showMinimumCharactersError: false\r\n        });\r\n    }\r\n\r\n    componentWillMount() {\r\n        announce.initialize();\r\n    }\r\n\r\n    componentDidUpdate(prevProps: MultiSelectProps<T>, prevState: MultiSelectState<T>) {\r\n\r\n        if (prevState.activeSearchResult != this.state.activeSearchResult) {\r\n\r\n            if (this.state.activeSearchResult >= 0\r\n                && this.state.searchResults.length > 0\r\n                && this.state.activeSearchResult == (this.state.searchResults.length - 1)\r\n                && this.state.showLoadMoreResults) {\r\n                // last result is selected and load more is shown, make sure it is scrolled into view\r\n\r\n                const drop = this.dropdownRef.current;\r\n                const el = this.loadingMoreResults.current;\r\n\r\n                drop.scrollTop = el.offsetTop + el.offsetHeight - drop.clientHeight;\r\n\r\n\r\n                //console.log(\"scrolling to see load more\");//, setting scrolltop\", drop, el, el.offsetTop - drop.clientHeight);\r\n\r\n\r\n            } else if (this.state.activeSearchResult >= 0) {\r\n                // make sure it is scrolled into view\r\n                const id = this.getSearchResultDomId(this.state.activeSearchResult);\r\n                const el = document.getElementById(id);\r\n                if (el != null) {\r\n                    const drop = this.dropdownRef.current;\r\n\r\n                    const c = drop.getBoundingClientRect();\r\n                    const e = el.getBoundingClientRect();\r\n\r\n                    if (e.top < c.top && e.bottom <= c.bottom) {\r\n                        const delta = c.top - e.top;\r\n                        drop.scrollTop = drop.scrollTop - delta;\r\n                        //console.log(\"scrolling into view top\");\r\n                    }\r\n\r\n                    if (e.top >= c.top && e.bottom > c.bottom) {\r\n                        const delta = e.bottom - c.bottom;\r\n                        drop.scrollTop = drop.scrollTop + delta;\r\n                        //console.log(\"scrolling into view bottom\");\r\n                    }\r\n\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const props = this.props;\r\n        const dict = dictionary(props.dictionary);\r\n        const state = this.state;\r\n        const searchId = this.getSearchDomId();\r\n        const dropdownId = this.getDropdownDomId();\r\n        const valuesLabel = typeof(props.valuesLabel) === \"function\" ? props.valuesLabel() : props.valuesLabel;\r\n        const searchLabel = typeof(props.searchLabel) === \"function\" ? props.searchLabel() : props.searchLabel;\r\n        return (\r\n            <div ref={this.controlRef} id={this.id} style={props.style} className={\r\n                cn(style.s25Multi, style.s25Control, {\r\n                    s25SearchResultsLoading: state.searchResultsLoading,\r\n                    s25Focused: state.focused,\r\n                    s25Open: state.open,\r\n                })}>\r\n                <div className={style.s25Body}>\r\n                    {state.values.map((value, index) => {\r\n                        return <input key={index} type=\"hidden\" name={props.name} value={this.getItemId(value)}/>\r\n                    })\r\n                    }\r\n                    {state.values.length > 0 &&\r\n                    <React.Fragment>\r\n                        <label className={style.s25Offscreen} id={this.getValuesLabelDomId()}>\r\n                            {valuesLabel}\r\n                        </label>\r\n                        <div ref={this.valuesRef}\r\n                             className={style.s25MultiValues}\r\n                             tabIndex={0}\r\n                             role=\"listbox\"\r\n                             aria-orientation=\"horizontal\"\r\n                             aria-activedescendant={this.getValueDomId(state.activeValue)}\r\n                             aria-multiselectable=\"true\"\r\n                             aria-label={valuesLabel}\r\n                             aria-labelledby={this.getValuesLabelDomId()}\r\n                             onKeyDown={this.onValuesKeyDown}\r\n                             onFocus={this.onValuesFocus}\r\n                             onBlur={this.onValuesBlur}>\r\n                            {state.values.map((value, index) => {\r\n                                const selected = state.selectedValues.indexOf(index) >= 0;\r\n                                const active = state.activeValue == index;\r\n                                const id = this.getValueDomId(index);\r\n                                const classes = cn(style.s25Item, {s25Active: active, s25Selected: selected});\r\n                                return (\r\n                                    <div key={index}\r\n                                         id={id}\r\n                                         className={classes}\r\n                                         role=\"option\"\r\n                                         aria-selected={selected}\r\n                                         aria-label={this.getItemLabel(value)}\r\n                                         onClick={this.onValueClicked(index)}>\r\n                                        <div className={style.s25Content}>\r\n                                            {this.getValueContent(value)}\r\n                                        </div>\r\n                                    </div>\r\n                                );\r\n                            })}\r\n                        </div>\r\n                    </React.Fragment>\r\n                    }\r\n\r\n                    {scope(() => {\r\n                        //\r\n                        // REMOVE BUTTON\r\n                        //\r\n                        const disabled = state.selectedValues.length < 1;\r\n                        const className = cn(style.s25Remove, {s25Offscreen: state.values.length < 1});\r\n                        return (\r\n                            <button className={className}\r\n                                    onClick={this.onRemoveSelectedValuesClicked}\r\n                                    onFocus={this.onRemoveValuesFocus}\r\n                                    onBlur={this.onRemoveValuesBlur}\r\n                                    disabled={disabled}\r\n                                    aria-disabled={disabled}\r\n                                    title={dict.removeButtonTitle()}>\r\n                                <span>\r\n                                    <IconRemove height={20} width={20}/>\r\n                                </span>\r\n                            </button>\r\n                        );\r\n                    })}\r\n\r\n                    <label htmlFor={searchId} className={style.s25Offscreen}>\r\n                        {searchLabel}\r\n                    </label>\r\n                    <input ref={this.searchRef}\r\n                           className={style.s25Search}\r\n                           type=\"text\"\r\n                           id={searchId}\r\n                           value={state.search}\r\n                           onChange={this.onSearchChanged}\r\n                           onKeyDown={this.onSearchKeyDown}\r\n                           onFocus={this.onSearchFocus}\r\n                           onBlur={this.onSearchBlur}\r\n                           role=\"combobox\"\r\n                           aria-autocomplete=\"none\"\r\n                           aria-haspopup=\"true\"\r\n                           aria-owns={dropdownId}\r\n                           aria-controls={dropdownId}\r\n                           aria-expanded={state.open}\r\n                           aria-activedescendant={this.getSearchResultDomId(state.activeSearchResult)}\r\n                           aria-busy={state.searchResultsLoading}\r\n                    />\r\n\r\n                </div>\r\n                {/* s2body */}\r\n\r\n                <div className={style.s25Toggle}\r\n                     aria-hidden={true}\r\n                     onMouseDownCapture={this.onToggleMouseDownCapture}\r\n                     onClick={this.onToggleClick}>\r\n                    <IconToggle height={20} width={20}/>\r\n                </div>\r\n\r\n                {state.open &&\r\n                <Dropdown control={this.controlRef.current} className={style.s25Dropdown}>\r\n\r\n                    <div className={style.s25Body + \" \" + style.s25SearchResults}\r\n                         style={{maxHeight: \"120px\"}}\r\n                         ref={this.dropdownRef}\r\n                         aria-busy={state.searchResultsLoading}\r\n                         id={dropdownId}\r\n                         onScroll={this.onDropdownScroll}>\r\n                        {state.searchResults && state.searchResults.length > 0 &&\r\n                        (\r\n                            <div className={style.s25Options}\r\n                                 role=\"listbox\"\r\n                                 aria-activedescendant={this.getSearchResultDomId(state.activeSearchResult)}>\r\n                                {\r\n                                    state.searchResults.map((item, i) => {\r\n                                        const className = cn(style.s25Item, {s25Active: state.activeSearchResult == i});\r\n                                        return (\r\n                                            <div key={i}\r\n                                                 className={className}\r\n                                                 id={this.getSearchResultDomId(i)}\r\n                                                 onMouseDown={this.onMouseDownSearchResult(i)}\r\n                                                 onMouseMove={this.onMouseEnterSearchResult(i)}\r\n                                                 onMouseUp={this.onSearchResultClicked(i)}\r\n                                                 role=\"option\"\r\n                                                 aria-selected={state.activeSearchResult === i}\r\n                                            >\r\n                                                {this.getResultContent(item)}\r\n                                            </div>);\r\n                                    })\r\n                                }\r\n                            </div>\r\n\r\n                        )}\r\n                        {state.showNoSearchResultsFound &&\r\n                        <div className={style.s25NoSearchResults}>{dict.noSearchResults()}</div>\r\n                        }\r\n                        {(state.searchResultsLoading || state.showLoadMoreResults) &&\r\n                        <div ref={this.loadingMoreResults}\r\n                             className={cn(style.s25SearchResultsLoading, style.s25SearchResultsMessage)}>{dict.searchResultsLoading()}</div>\r\n                        }\r\n                        {(state.showMinimumCharactersError) &&\r\n                        <div className={cn(style.s25SearchResultsMinimumError, style.s25SearchResultsMessage)}>\r\n                            {dict.minimumCharactersMessage(state.search.length, props.minimumCharacters)}\r\n                        </div>\r\n                        }\r\n                    </div>\r\n                </Dropdown>\r\n                }\r\n\r\n            </div>\r\n        )\r\n    }\r\n\r\n    getItemId(item: T): string {\r\n        if (typeof this.props.itemId === \"function\") {\r\n            return this.props.itemId(item);\r\n        } else {\r\n            return \"\" + item[this.props.itemId];\r\n        }\r\n    }\r\n\r\n    getValueContent(item: T) {\r\n        if (typeof this.props.valueContent === \"function\") {\r\n            return this.props.valueContent(item);\r\n        } else {\r\n            return item[this.props.valueContent];\r\n        }\r\n    }\r\n\r\n    getItemLabel(item: T): string {\r\n        if (typeof this.props.itemLabel === \"function\") {\r\n            return this.props.itemLabel(item);\r\n        } else {\r\n            return \"\" + item[this.props.itemLabel];\r\n        }\r\n    }\r\n\r\n    getResultContent(item: T) {\r\n        if (this.props.resultContent) {\r\n            if (typeof this.props.resultContent === \"function\") {\r\n                return this.props.resultContent(item);\r\n            } else {\r\n                return item[this.props.resultContent];\r\n            }\r\n        } else {\r\n            return this.getValueContent(item);\r\n        }\r\n    }\r\n\r\n    setActiveValue(index: number) {\r\n        this.setState({activeValue: index});\r\n    }\r\n\r\n    toggleSelectedValue(index: number) {\r\n        const oldSelected = this.state.selectedValues;\r\n        const newSelected = oldSelected.slice();\r\n        const pos = oldSelected.indexOf(index);\r\n        if (pos >= 0) {\r\n            newSelected.splice(pos, 1);\r\n        } else {\r\n            newSelected.push(index);\r\n        }\r\n        this.setState({selectedValues: newSelected, activeValue: index});\r\n\r\n    }\r\n\r\n    onRemoveSelectedValuesClicked = (event: React.MouseEvent) => {\r\n        const selected = this.state.selectedValues;\r\n        const values = this.state.values.slice();\r\n\r\n        selected.sort();\r\n        for (let i = 0; i < selected.length; i++) {\r\n            values.splice(selected[i] - i, 1);\r\n        }\r\n        this.setState({values: values, selectedValues: [], activeValue: values.length > 0 ? 0 : -1});\r\n        if (values.length > 0) {\r\n            this.valuesRef.current.focus();\r\n        } else {\r\n            this.focusSearch();\r\n        }\r\n    }\r\n\r\n    onValueClicked = (index: number) => (event: React.MouseEvent) => {\r\n        this.toggleSelectedValue(index);\r\n    }\r\n\r\n    onValuesFocus = (event: React.FocusEvent) => {\r\n        let index = 0;\r\n        if (this.state.selectedValues.length > 0) {\r\n            index = this.state.selectedValues[0];\r\n        }\r\n        this.setActiveValue(index);\r\n        this.setState({focused: true});\r\n    }\r\n\r\n    onValuesBlur = (event: React.FocusEvent) => {\r\n        this.setActiveValue(-1);\r\n        this.setState({focused: false});\r\n    }\r\n\r\n    onValuesKeyDown = (event: React.KeyboardEvent) => {\r\n        const values = this.state.values;\r\n        const active = this.state.activeValue;\r\n\r\n        //console.log(event.key);\r\n\r\n        switch (event.key) {\r\n            case Key.ArrowLeft: {\r\n                if (active > 0) {\r\n                    this.setActiveValue(active - 1);\r\n                }\r\n                event.preventDefault();\r\n                break;\r\n            }\r\n            case Key.ArrowRight: {\r\n                if (active < values.length - 1) {\r\n                    this.setActiveValue(active + 1);\r\n                }\r\n                event.preventDefault();\r\n                break;\r\n            }\r\n            case Key.PageDown: {\r\n                // TODO\r\n                event.preventDefault();\r\n                break;\r\n            }\r\n            case Key.PageUp: {\r\n                // TODO\r\n                event.preventDefault();\r\n                break;\r\n            }\r\n            case Key.Home: {\r\n                this.setActiveValue(0);\r\n                event.preventDefault();\r\n                break;\r\n            }\r\n            case Key.End: {\r\n                this.setActiveValue(values.length - 1);\r\n                event.preventDefault();\r\n                break;\r\n            }\r\n            case Key.Space: {\r\n                this.toggleSelectedValue(active);\r\n                event.preventDefault();\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    onSearchResultClicked = (index: number) => (event: React.MouseEvent) => {\r\n        this.selectSearchResult(index);\r\n        event.preventDefault();\r\n    }\r\n\r\n    onMouseDownSearchResult = (index: number) => (event: React.MouseEvent) => {\r\n        if (this.state.activeSearchResult != index) {\r\n            this.setActiveSearchResult(index);\r\n        }\r\n        event.preventDefault();\r\n    }\r\n\r\n    onMouseEnterSearchResult = (index: number) => (event: React.MouseEvent) => {\r\n        if (this.lastMouseClientX == event.clientX && this.lastMouseClientY == event.clientY) {\r\n            // the mouse did not move, the dropdown was scrolled instead, we do not change selected element because\r\n            // it will be scrolled into view and mess with the scrolling of the results in the dropdown\r\n            return;\r\n        }\r\n\r\n\r\n        this.lastMouseClientX = event.clientX;\r\n        this.lastMouseClientY = event.clientY;\r\n        if (this.state.activeSearchResult != index) {\r\n            this.setActiveSearchResult(index);\r\n        }\r\n    }\r\n\r\n    setActiveSearchResult = (index: number) => {\r\n        this.setState({activeSearchResult: index});\r\n    }\r\n\r\n    onSearchKeyDown = (event: React.KeyboardEvent) => {\r\n        const results = this.state.searchResults;\r\n\r\n        if (!results || results.length < 1) {\r\n            return;\r\n        }\r\n\r\n        const active = this.state.activeSearchResult;\r\n\r\n        switch (event.key) {\r\n            case Key.ArrowUp: {\r\n                if (active > 0) {\r\n                    this.setActiveSearchResult(active - 1);\r\n                }\r\n                event.preventDefault();\r\n                break;\r\n            }\r\n            case Key.ArrowDown: {\r\n                if (active < results.length - 1) {\r\n                    this.setActiveSearchResult(active + 1);\r\n                }\r\n                event.preventDefault();\r\n                break;\r\n            }\r\n            case Key.PageDown: {\r\n                // TODO\r\n                event.preventDefault();\r\n                break;\r\n            }\r\n            case Key.PageUp: {\r\n                // TODO\r\n                event.preventDefault();\r\n                break;\r\n            }\r\n            case Key.Home: {\r\n                this.setActiveSearchResult(0);\r\n                event.preventDefault();\r\n                break;\r\n            }\r\n            case Key.End: {\r\n                this.setActiveSearchResult(results.length - 1);\r\n                event.preventDefault();\r\n                break;\r\n            }\r\n            case Key.Escape: {\r\n                this.close();\r\n                event.preventDefault();\r\n                break;\r\n            }\r\n            case Key.Enter: {\r\n                this.selectSearchResult(this.state.activeSearchResult);\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    open = () => {\r\n        this.search(\"\", false);\r\n        this.focusSearch();\r\n    }\r\n\r\n    close() {\r\n        this.setState({\r\n            open: false,\r\n            searchResults: undefined,\r\n            activeSearchResult: -1,\r\n            showNoSearchResultsFound: false,\r\n            searchResultsLoading: false,\r\n            search: \"\"\r\n        });\r\n    }\r\n\r\n\r\n    selectSearchResult(index: number) {\r\n        const selected = this.state.searchResults[index];\r\n        const values = this.state.values.slice();\r\n        values.push(selected);\r\n        this.setState({\r\n            values: values\r\n        });\r\n        this.close();\r\n\r\n        const label = this.getItemLabel(selected);\r\n        announce.politely(dictionary(this.props.dictionary).valueAdded(label));\r\n    }\r\n\r\n\r\n    onRemoveValuesFocus = (event: React.FocusEvent) => {\r\n        this.setState({focused: true});\r\n    }\r\n\r\n    onRemoveValuesBlur = (event: React.FocusEvent) => {\r\n        this.setState({focused: false});\r\n    }\r\n\r\n\r\n    focusSearch() {\r\n        this.searchFocussedPragmatically = true;\r\n        this.searchRef.current.focus();\r\n    }\r\n\r\n    onSearchFocus = (event: React.FocusEvent) => {\r\n\r\n        this.setState({focused: true});\r\n        if (this.props.openOnSearchFocus && !this.searchFocussedPragmatically) {\r\n            this.open();\r\n        }\r\n\r\n        this.searchFocussedPragmatically = false;\r\n    }\r\n\r\n    onSearchBlur = (event: React.FocusEvent) => {\r\n        this.setState({focused: false, open: false, search: \"\"});\r\n    }\r\n\r\n\r\n    async search(value: string, debounce:boolean) {\r\n        const props = this.props;\r\n        const dict = dictionary(props.dictionary);\r\n        const searchPage = 0;\r\n\r\n        const minimumCharactersReached = (value.length >= this.props.minimumCharacters);\r\n\r\n        this.setState({\r\n            searchResults: undefined,\r\n            searchResultDomIds: undefined,\r\n            search: value,\r\n            searchPage: searchPage,\r\n            searchResultsLoading: minimumCharactersReached,\r\n            showNoSearchResultsFound: false,\r\n            open: true,\r\n            activeSearchResult: -1,\r\n            showLoadMoreResults: false,\r\n            showMinimumCharactersError: !minimumCharactersReached\r\n        });\r\n\r\n        if (!minimumCharactersReached) {\r\n            // todo - throttle this announcement?\r\n            announce.politely(dict.minimumCharactersMessage(value.length, this.props.minimumCharacters));\r\n            return;\r\n        }\r\n\r\n        // todo - throttle this announcement?\r\n        announce.politely(dict.searchResultsLoading());\r\n\r\n        if (debounce) {\r\n            this.queryDebounced(value, searchPage);\r\n        } else {\r\n            this.query(value, searchPage);\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n    async query(search:string, page:number) {\r\n        try {\r\n            const dict = dictionary(this.props.dictionary);\r\n            const result = await this.props.query(search, page);\r\n            let searchResultDomIds: number[] = [];\r\n            result.values.forEach(() => {\r\n                searchResultDomIds.push(uuid())\r\n            });\r\n\r\n            if (result.values.length < 1) {\r\n                announce.politely(dict.noSearchResults());\r\n            }\r\n\r\n            this.setState({\r\n                searchResults: result.values,\r\n                searchResultDomIds: searchResultDomIds,\r\n                searchHasMoreResults: result.more,\r\n                activeSearchResult: result.values.length > 0 ? 0 : -1,\r\n                showNoSearchResultsFound: result.values.length < 1,\r\n                searchResultsLoading: false,\r\n                showLoadMoreResults: result.more,\r\n                searchPage: 0\r\n            });\r\n        } catch (e) {\r\n            // TODO for now assuming all failures are cancellations, should we treat them differently?\r\n\r\n        }\r\n    }\r\n\r\n\r\n\r\n    onSearchChanged = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        const value = event.target.value;\r\n        this.search(value, true);\r\n    }\r\n\r\n    async onLoadMore() {\r\n        if (this.state.searchResultsLoading) {\r\n            return;\r\n        }\r\n        const dict = dictionary(this.props.dictionary);\r\n        const page = this.state.searchPage + 1;\r\n        const value = this.searchRef.current.value;\r\n        this.setState({\r\n            searchResultsLoading: true,\r\n        });\r\n\r\n        announce.politely(dict.searchResultsLoading());\r\n\r\n        try {\r\n            const result = await this.props.query(value, page);\r\n            const searchResultDomIds = this.state.searchResultDomIds.slice();\r\n            const searchResults = this.state.searchResults.slice();\r\n            result.values.forEach((result) => {\r\n                searchResults.push(result);\r\n                searchResultDomIds.push(uuid())\r\n            });\r\n\r\n            if (result.values.length < 1) {\r\n                // TODO announce no further results\r\n                announce.politely(dict.noSearchResults());\r\n            }\r\n\r\n            this.setState({\r\n                searchResults: searchResults,\r\n                searchResultDomIds: searchResultDomIds,\r\n                searchHasMoreResults: result.more,\r\n                searchResultsLoading: false,\r\n                showLoadMoreResults: result.more,\r\n                searchPage: page\r\n                // TODO collapse showLoadMoreReults and searchhasMoreResults?\r\n            });\r\n\r\n        } catch (e) {\r\n            // TODO for now assuming all failures are canellations, should we treat them differently?\r\n        }\r\n\r\n\r\n    }\r\n\r\n    onDropdownScroll = (event: React.UIEvent) => {\r\n        if (!this.state.showLoadMoreResults) {\r\n            return;\r\n        }\r\n        const more = this.loadingMoreResults.current;\r\n        const drop = this.dropdownRef.current;\r\n\r\n        const visibility = util.calculateVerticalVisibility(drop, more);\r\n        if (visibility !== \"hidden\") {\r\n            this.onLoadMore();\r\n        }\r\n\r\n    }\r\n\r\n\r\n    onRemove = (index: number) => (event: React.MouseEvent) => {\r\n        const oldValues = this.state.values;\r\n        const newValues = this.state.values.slice();\r\n        const removedValue = newValues.splice(index, 1)[0];\r\n\r\n        if (this.props.onValueRemoved) {\r\n            this.props.onValueRemoved(removedValue, oldValues, newValues);\r\n        }\r\n\r\n        if (this.props.onValuesChanged) {\r\n            this.props.onValuesChanged(newValues, oldValues);\r\n        }\r\n\r\n        this.setState({values: newValues}, () => {\r\n            //console.log(\"set state callback\");\r\n            if (this.state.values.length == 0) {\r\n                this.focusSearch();\r\n            } else {\r\n                const values = this.state.values;\r\n                let focus = index;\r\n                if (focus >= values.length) {\r\n                    focus = values.length - 1;\r\n                }\r\n                document.getElementById(this.getValueDomId(focus)).focus();\r\n            }\r\n\r\n        });\r\n    }\r\n\r\n    getValuesLabelDomId() {\r\n        return this.id + \"-values-label\";\r\n    }\r\n\r\n\r\n    getSearchDomId() {\r\n        return this.id + \"-search\";\r\n    }\r\n\r\n    getDropdownDomId() {\r\n        return this.id + \"-dropdown\";\r\n    }\r\n\r\n\r\n    getValueDomId(index: number) {\r\n        return (index === undefined || index < 0) ? undefined : this.id + \"-value-\" + index;\r\n    }\r\n\r\n    getSearchResultDomId(index: number) {\r\n        return (index === undefined || index < 0) ?\r\n            undefined :\r\n            this.id + \"-result-\" + this.state.searchResultDomIds[index];\r\n    }\r\n\r\n    onToggleMouseDownCapture = (event: React.MouseEvent) => {\r\n        this.toggleWasOpen = this.state.open;\r\n    }\r\n\r\n    onToggleClick = (event: React.MouseEvent) => {\r\n        if (this.toggleWasOpen) {\r\n            this.close();\r\n        } else {\r\n            this.open();\r\n        }\r\n        this.focusSearch();\r\n    }\r\n\r\n}\r\n\r\n\r\nclass IconToggle extends React.PureComponent<{ height: number, width: number }, {}> {\r\n    render() {\r\n        const viewBox = \"0 0 \" + this.props.width + \" \" + this.props.height;\r\n        return <svg height={this.props.height} width={this.props.width} viewBox={viewBox} tabIndex={-1}\r\n                    focusable=\"false\">\r\n            <path\r\n                d=\"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z\"></path>\r\n        </svg>\r\n    }\r\n}\r\n\r\nclass IconRemove extends React.PureComponent<{ height: number, width: number }, {}> {\r\n    render() {\r\n        const viewBox = \"0 0 \" + this.props.width + \" \" + this.props.height;\r\n        return <svg height={this.props.height} width={this.props.width} viewBox={viewBox} tabIndex={-1}\r\n                    focusable=\"false\">\r\n            <path\r\n                d=\"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z\"></path>\r\n        </svg>\r\n    }\r\n}\r\n","export function initialize() {\r\n    if (document.getElementById(\"s25-live\")) {\r\n        return;\r\n    }\r\n\r\n    const live = document.createElement(\"div\");\r\n    live.setAttribute(\"id\", \"s25-live\");\r\n    live.setAttribute(\"class\", \"s25-offscreen s25-live\");\r\n    document.body.appendChild(live);\r\n\r\n    const assertive = document.createElement(\"div\");\r\n    assertive.setAttribute(\"id\", \"s25-live-assertive\");\r\n    assertive.setAttribute(\"role\", \"log\");\r\n    assertive.setAttribute(\"aria-live\", \"assertive\");\r\n    assertive.setAttribute(\"aria-relevant\", \"additions\");\r\n    live.appendChild(assertive);\r\n\r\n    const polite = document.createElement(\"div\");\r\n    polite.setAttribute(\"id\", \"s25-live-polite\");\r\n    polite.setAttribute(\"role\", \"log\");\r\n    polite.setAttribute(\"aria-live\", \"polite\");\r\n    polite.setAttribute(\"aria-relevant\", \"additions\");\r\n    live.appendChild(polite);\r\n\r\n}\r\n\r\nexport function assertively(message: string) {\r\n    const node = document.createElement(\"div\");\r\n    node.appendChild(document.createTextNode(message));\r\n    document.getElementById(\"s25-live-assertive\").appendChild(node);\r\n    // TODO clean up old nodes\r\n\r\n\r\n    // for debugging\r\n    const live = document.getElementById(\"s25-live\");\r\n    live.scrollTop = live.scrollHeight;\r\n\r\n}\r\n\r\nexport function politely(message: string) {\r\n    const node = document.createElement(\"div\");\r\n    node.appendChild(document.createTextNode(message));\r\n    document.getElementById(\"s25-live-polite\").appendChild(node);\r\n\r\n\r\n    // for debugging\r\n    const live = document.getElementById(\"s25-live\");\r\n    live.scrollTop = live.scrollHeight;\r\n\r\n    // TODO clean up old nodes\r\n}\r\n","import * as React from \"react\";\r\nimport * as util from \"./util\";\r\nimport {createPortal} from \"react-dom\";\r\n\r\nexport interface DropdownProps {\r\n    control: HTMLElement, // TODO make this a ref\r\n    className?: string,\r\n    children: React.ReactNode\r\n}\r\n\r\nexport class Dropdown extends React.PureComponent<DropdownProps, {}> {\r\n\r\n    container: HTMLElement;\r\n\r\n    scrollParents: EventTarget[];\r\n    private throttledPosition: () => void;\r\n\r\n    constructor(props: DropdownProps) {\r\n        super(props);\r\n        this.throttledPosition = util.throttle(50, this.position);\r\n    }\r\n\r\n    componentWillMount() {\r\n        this.container = document.createElement(\"div\");\r\n        const cn = this.props.className;\r\n        if (cn) {\r\n            this.container.setAttribute(\"class\", cn);\r\n        }\r\n        document.body.appendChild(this.container);\r\n\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.scrollParents.forEach((parent) => {\r\n            [\"resize\", \"scroll\", \"touchmove\"].forEach((event) => {\r\n                parent.removeEventListener(event, this.throttledPosition);\r\n            });\r\n        });\r\n        delete this.scrollParents;\r\n        document.body.removeChild(this.container);\r\n        delete this.container;\r\n    }\r\n\r\n\r\n    render() {\r\n        return createPortal(this.props.children, this.container);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.scrollParents = util.getScrollParents(this.props.control);\r\n        this.scrollParents.forEach((parent) => {\r\n            [\"resize\", \"scroll\", \"touchmove\"].forEach((event) => {\r\n                parent.addEventListener(event, this.throttledPosition);\r\n            });\r\n        });\r\n        this.position();\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        this.position();\r\n    }\r\n\r\n    position = () => {\r\n        const control = this.props.control;\r\n        const rect = control.getBoundingClientRect();\r\n        const style = `\r\n            top: ${rect.top + rect.height + window.pageYOffset}px;\r\n            left: ${rect.left + window.pageXOffset}px;\r\n            width: ${rect.width}px;\r\n        `;\r\n        // TODO also called on scroll of children - should not be\r\n        // console.log(\"position\");\r\n        this.container.setAttribute(\"style\", style);\r\n    }\r\n}\r\n\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__9__;","export interface Dictionary {\r\n    valueAdded: (itemLabel: string) => string;\r\n\r\n    noSearchResults: () => string;\r\n    searchResultsLoading: () => string;\r\n    removeButtonTitle: () => string;\r\n    minimumCharactersMessage: (len: number, min: number) => string;\r\n}\r\n\r\nclass AmericanEnglishDictionary implements Dictionary {\r\n\r\n    noSearchResults() {\r\n        return \"No results available\";\r\n    }\r\n\r\n    searchResultsLoading() {\r\n        return \"Loading...\";\r\n    }\r\n\r\n    removeButtonTitle() {\r\n        return \"Remove selected values\";\r\n    }\r\n\r\n    valueAdded(itemLabel: string) {\r\n        return itemLabel + \" added\";\r\n    }\r\n\r\n    minimumCharactersMessage(len: number, min: number) {\r\n        const delta = min - len;\r\n        return \"Please enter \" + delta + \" more character\" + (delta > 1 ? \"s\" : \"\");\r\n    }\r\n}\r\n\r\nconst dictionaries = new Map<string, Dictionary>();\r\ndictionaries.set(\"en_us\", new AmericanEnglishDictionary());\r\n\r\nexport function dictionary(dict: Dictionary | string): Dictionary {\r\n    const fallback = dictionaries.get(\"en_us\");\r\n\r\n    if (!dict) {\r\n        return fallback;\r\n    }\r\n\r\n    if (typeof dict == \"string\") {\r\n        const instance = dictionaries.get(dict);\r\n        return instance ? instance : fallback;\r\n    } else {\r\n        return dict;\r\n    }\r\n}\r\n"],"sourceRoot":""}