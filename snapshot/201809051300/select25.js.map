{"version":3,"sources":["webpack://select25/webpack/universalModuleDefinition","webpack://select25/webpack/bootstrap","webpack://select25/./src/util.ts","webpack://select25/external {\"root\":\"React\",\"commonjs2\":\"react\",\"commonjs\":\"react\",\"amd\":\"react\"}","webpack://select25/./src/select2.scss?b0d7","webpack://select25/./node_modules/classnames/bind.js","webpack://select25/./src/select2.tsx","webpack://select25/./src/announce.ts","webpack://select25/./src/dropdown.tsx","webpack://select25/external {\"root\":\"ReactDOM\",\"commonjs2\":\"react-dom\",\"commonjs\":\"react-dom\",\"amd\":\"react-dom\"}","webpack://select25/./src/dictionary.ts"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__1__","__WEBPACK_EXTERNAL_MODULE__9__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","style","classNames","cn","extend","params","_i","arguments","length","Key","ArrowDown","ArrowUp","ArrowLeft","ArrowRight","Space","Enter","Tab","Home","End","PageUp","PageDown","Backspace","Delete","Clear","Escape","uuid","counter","debounce","quiet","delegate","that","timeout","undefined","apply","args","clearTimeout","setTimeout","getScrollParents","el","elementPosition","getComputedStyle","position","parents","parent","parentElement","nodeType","style_1","test","overflow","overflowX","overflowY","indexOf","push","ownerDocument","body","document","defaultView","throttle","delay","callback","calculateVerticalVisibility","container","element","getBoundingClientRect","e","bottom","top","scope","s25-control","s25Control","s25-multi","s25Multi","s25-body","s25Body","s25-toggle","s25Toggle","s25-multi-values","s25MultiValues","s25-remove","s25Remove","s25-search","s25Search","s25-item","s25Item","s25-remove-x","s25RemoveX","s25-label","s25Label","s25-offscreen","s25Offscreen","s25-dropdown","s25Dropdown","s25-options","s25Options","s25-no-search-results","s25NoSearchResults","s25-search-results-message","s25SearchResultsMessage","s25-search-results-loading","s25SearchResultsLoading","s25-search-results-minimum-error","s25SearchResultsMinimumError","s25-search-results","s25SearchResults","s25-open","s25Open","s25-focused","s25Focused","s25-content","s25Content","s25-active","s25Active","s25-selected","s25Selected","s25-live","s25Live","__WEBPACK_AMD_DEFINE_RESULT__","hasOwn","classes","arg","argType","this","Array","isArray","join","default","React","announce","util","util_1","dropdown_1","dictionary_1","MultiSelect","_super","props","_this","onRemoveSelectedValuesClicked","event","selected","state","selectedValues","values","slice","sort","splice","setState","activeValue","valuesRef","current","focus","focusSearch","onValueClicked","index","toggleSelectedValue","onValuesFocus","setActiveValue","focused","onValuesBlur","onValuesKeyDown","active","preventDefault","onSearchResultClicked","selectSearchResult","onMouseDownSearchResult","activeSearchResult","setActiveSearchResult","onMouseEnterSearchResult","lastMouseClientX","clientX","lastMouseClientY","clientY","onSearchKeyDown","results","searchResults","close","open","search","onRemoveValuesFocus","onRemoveValuesBlur","onSearchFocus","openOnSearchFocus","searchFocussedPragmatically","onSearchBlur","onSearchChanged","target","onDropdownScroll","showLoadMoreResults","more","loadingMoreResults","drop","dropdownRef","onLoadMore","onRemove","oldValues","newValues","removedValue","onValueRemoved","onValuesChanged","focus_1","getElementById","getValueDomId","onToggleMouseDownCapture","toggleWasOpen","onToggleClick","id","controlRef","createRef","searchRef","queryDebounced","quietMillis","query","searchPage","searchResultDomIds","searchHasMoreResults","showNoSearchResultsFound","searchResultsLoading","showMinimumCharactersError","__extends","componentWillMount","initialize","componentDidUpdate","prevProps","prevState","scrollTop","offsetTop","offsetHeight","clientHeight","getSearchResultDomId","delta","render","dict","dictionary","searchId","getSearchDomId","dropdownId","getDropdownDomId","valuesLabel","searchLabel","createElement","ref","className","map","type","getItemId","Fragment","getInstructionsDomId","instructions","getValuesLabelDomId","tabIndex","role","aria-orientation","aria-activedescendant","aria-multiselectable","aria-label","aria-labelledby","aria-describedby","onKeyDown","onFocus","onBlur","aria-selected","aria-checked","getItemLabel","onClick","getValueContent","disabled","aria-disabled","title","removeButtonTitle","IconRemove","height","width","htmlFor","onChange","aria-autocomplete","aria-haspopup","aria-owns","aria-controls","aria-expanded","aria-busy","aria-hidden","onMouseDownCapture","IconToggle","Dropdown","control","maxHeight","onScroll","item","onMouseDown","onMouseMove","onMouseUp","aria-posinset","getResultContent","noSearchResults","minimumCharactersMessage","minimumCharacters","itemId","valueContent","itemLabel","resultContent","oldSelected","newSelected","pos","label","politely","valueAdded","minimumCharactersReached","page","result","_a","sent","searchResultDomIds_1","forEach","searchResultDomIds_2","searchResults_1","defaultProps","PureComponent","viewBox","focusable","add","message","node","appendChild","createTextNode","collection","firstChild","removeChild","live","setAttribute","assertive","polite","assertively","react_dom_1","rect","pageYOffset","left","pageXOffset","throttledPosition","componentWillUnmount","scrollParents","removeEventListener","createPortal","children","componentDidMount","addEventListener","AmericanEnglishDictionary","len","min","dictionaries","Map","set","fallback","instance"],"mappings":"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","file":"select25.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"), require(\"react-dom\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\", \"react-dom\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"select25\"] = factory(require(\"react\"), require(\"react-dom\"));\n\telse\n\t\troot[\"select25\"] = factory(root[\"React\"], root[\"ReactDOM\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__1__, __WEBPACK_EXTERNAL_MODULE__9__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","import * as style from \"./select2.scss\";\nimport * as classNames from \"classnames/bind\";\nimport * as React from \"react\";\n\nexport const cn = classNames.bind(style);\n\nexport function extend(...params: object[]) {\n    for (let i = 1; i < arguments.length; i++)\n        for (let key in arguments[i])\n            if (arguments[i].hasOwnProperty(key)) {\n                if (typeof arguments[0][key] === 'object'\n                    && typeof arguments[i][key] === 'object')\n                    extend(arguments[0][key], arguments[i][key]);\n                else\n                    arguments[0][key] = arguments[i][key];\n            }\n    return arguments[0];\n}\n\nexport const Key = {\n    // https://www.w3.org/TR/uievents-key/#named-key-attribute-values\n    ArrowDown: \"ArrowDown\",\n    ArrowUp: \"ArrowUp\",\n    ArrowLeft: \"ArrowLeft\",\n    ArrowRight: \"ArrowRight\",\n    Space: \" \",\n    Enter: \"Enter\",\n    Tab: \"Tab\",\n    Home: \"Home\",\n    End: \"End\",\n    PageUp: \"PageUp\",\n    PageDown: \"PageDown\",\n    Backspace: \"Backspace\",\n    Delete: \"Delete\",\n    Clear: \"Clear\",\n    Escape: \"Escape\"\n};\n\nexport const uuid = (function () {\n    let counter = 0;\n    return function () {\n        return counter++;\n    }\n})();\n\n\nexport function debounce(quiet: number, delegate: (...args: any[]) => void, that: Object) {\n    let timeout: number = undefined;\n    if (quiet < 0) {\n        return function () {\n            delegate.apply(that, arguments);\n        }\n    } else {\n        return function () {\n            const args = arguments;\n            if (timeout) {\n                window.clearTimeout(timeout);\n            }\n            timeout = window.setTimeout(function () {\n                timeout = undefined;\n                delegate.apply(that, args);\n            }, quiet);\n        };\n    }\n}\n\nexport function getScrollParents(el: HTMLElement): EventTarget[] {\n    const style = window.getComputedStyle(el);\n    const elementPosition = style.position;\n    if (elementPosition == \"fixed\") {\n        return [el];\n    }\n\n    const parents = [];\n    let parent = el.parentElement;\n\n    while (parent && parent.nodeType == 1) {\n        const style = window.getComputedStyle(parent);\n        if (/(overlay|scroll|auto)/.test(style.overflow + \" \" + style.overflowX + \" \" + style.overflowY)) {\n            if (elementPosition != \"absolute\" || [\"relative\", \"fixed\", \"absolute\"].indexOf(style.position) >= 0) {\n                parents.push(parent);\n            }\n        }\n        parent = parent.parentElement;\n    }\n\n    parents.push(el.ownerDocument.body);\n\n    // iframe\n    if (el.ownerDocument !== document) {\n        parents.push(el.ownerDocument.defaultView);\n    }\n\n    parents.push(window);\n    return parents;\n}\n\nexport function throttle(delay: number, callback: () => void): () => void {\n    let timeout: number = undefined;\n    return function () {\n        if (timeout != undefined) {\n            window.clearTimeout(timeout);\n            timeout = undefined;\n        }\n\n        if (timeout == undefined) {\n            timeout = window.setTimeout(function () {\n                callback();\n                timeout = undefined;\n            }, delay);\n        }\n    };\n}\n\n\nexport function calculateVerticalVisibility(container: HTMLElement, element: HTMLElement): \"hidden\" | \"partial-top\" | \"partial-bottom\" | \"visible\" {\n    const c = container.getBoundingClientRect();\n    const e = element.getBoundingClientRect();\n\n    if (e.bottom < c.top) {\n        // above the fold\n        return \"hidden\";\n    }\n\n    if (e.top > c.bottom) {\n        // below the fold\n        return \"hidden\";\n    }\n\n    if (e.top < c.top && e.bottom <= c.bottom) {\n        return \"partial-top\";\n    }\n\n    if (e.top >= c.top && e.bottom > c.bottom) {\n        return \"partial-bottom\";\n    }\n\n    return \"visible\";\n\n}\n\n/** helper that makes it easier to declare a scope inside a jsx block */\nexport function scope(delegate: () => React.ReactChild) {\n    return delegate();\n}\n\n\n","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"s25-control\":\"s25-control\",\"s25Control\":\"s25-control\",\"s25-multi\":\"s25-multi\",\"s25Multi\":\"s25-multi\",\"s25-body\":\"s25-body\",\"s25Body\":\"s25-body\",\"s25-toggle\":\"s25-toggle\",\"s25Toggle\":\"s25-toggle\",\"s25-multi-values\":\"s25-multi-values\",\"s25MultiValues\":\"s25-multi-values\",\"s25-remove\":\"s25-remove\",\"s25Remove\":\"s25-remove\",\"s25-search\":\"s25-search\",\"s25Search\":\"s25-search\",\"s25-item\":\"s25-item\",\"s25Item\":\"s25-item\",\"s25-remove-x\":\"s25-remove-x\",\"s25RemoveX\":\"s25-remove-x\",\"s25-label\":\"s25-label\",\"s25Label\":\"s25-label\",\"s25-offscreen\":\"s25-offscreen\",\"s25Offscreen\":\"s25-offscreen\",\"s25-dropdown\":\"s25-dropdown\",\"s25Dropdown\":\"s25-dropdown\",\"s25-options\":\"s25-options\",\"s25Options\":\"s25-options\",\"s25-no-search-results\":\"s25-no-search-results\",\"s25NoSearchResults\":\"s25-no-search-results\",\"s25-search-results-message\":\"s25-search-results-message\",\"s25SearchResultsMessage\":\"s25-search-results-message\",\"s25-search-results-loading\":\"s25-search-results-loading\",\"s25SearchResultsLoading\":\"s25-search-results-loading\",\"s25-search-results-minimum-error\":\"s25-search-results-minimum-error\",\"s25SearchResultsMinimumError\":\"s25-search-results-minimum-error\",\"s25-search-results\":\"s25-search-results\",\"s25SearchResults\":\"s25-search-results\",\"s25-open\":\"s25-open\",\"s25Open\":\"s25-open\",\"s25-focused\":\"s25-focused\",\"s25Focused\":\"s25-focused\",\"s25-content\":\"s25-content\",\"s25Content\":\"s25-content\",\"s25-active\":\"s25-active\",\"s25Active\":\"s25-active\",\"s25-selected\":\"s25-selected\",\"s25Selected\":\"s25-selected\",\"s25-live\":\"s25-live\",\"s25Live\":\"s25-live\"};","/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(this && this[arg] || arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tclasses.push(classNames.apply(this, arg));\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(this && this[key] || key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","import * as React from \"react\";\nimport {CSSProperties} from \"react\";\nimport * as style from \"./select2.scss\";\nimport * as classNames from \"classnames/bind\";\nimport * as announce from \"./announce\";\nimport * as util from \"./util\";\nimport {Key, scope, uuid} from \"./util\";\nimport {Dropdown} from \"./dropdown\";\nimport {Dictionary, dictionary} from \"./dictionary\";\n\nlet cn = classNames.bind(style);\n\nexport interface QueryResult<T> {\n    values: T[],\n    more: boolean,\n}\n\ninterface MultiSelectProps<T> {\n    name: string;\n    values: T[];\n\n    itemId: ((item: T) => string) | (keyof T);\n    itemLabel: ((item: T) => string) | (keyof T);\n    valueContent: ((item: T) => (string | React.ReactChild)) | (keyof T);\n    resultContent?: ((item: T) => (string | React.ReactChild)) | (keyof T);\n\n    valuesLabel: (() => string) | string;\n    searchLabel: (() => string) | string;\n\n    query: (search: string, page: number) => Promise<QueryResult<T>>;\n\n    /*todo or react node*/\n    style?: CSSProperties;\n\n    // callbacks\n\n    onValuesChanged?: (values: T[], oldValues: T[]) => void;\n    onValueRemoved?: (value: T, newValues: T[], oldValues: T[]) => void;\n\n    // optional\n\n    dictionary: Dictionary | string;\n    openOnSearchFocus: boolean;\n    minimumCharacters: number;\n    quietMillis: number;\n\n}\n\ninterface MultiSelectState<T> {\n    focused: boolean;\n    open: boolean;\n\n    values: T[];\n    activeValue: number;\n    selectedValues: number[];\n\n    search: string;\n    searchPage: number;\n    searchResults: T[] | undefined;\n    searchResultDomIds: number[] | undefined;\n    searchResultsLoading: boolean;\n    searchHasMoreResults: boolean;\n    activeSearchResult: number;\n    showNoSearchResultsFound: boolean;\n    showLoadMoreResults: boolean;\n    showMinimumCharactersError: boolean;\n}\n\n\nexport class MultiSelect<T> extends React.PureComponent<MultiSelectProps<T>, MultiSelectState<T>> {\n\n    static defaultProps = {\n        dictionary: \"en_us\",\n        openOnSearchFocus: true,\n        minimumCharacters: 0,\n        quietMillis:-1\n    };\n\n\n    id: string;\n\n    searchRef: React.RefObject<HTMLInputElement>;\n    controlRef: React.RefObject<any>;\n    valuesRef: React.RefObject<HTMLDivElement>;\n    dropdownRef: React.RefObject<HTMLDivElement>;\n    loadingMoreResults: React.RefObject<HTMLDivElement>;\n    lastMouseClientX: number;\n    lastMouseClientY: number;\n\n    searchFocussedPragmatically: boolean;\n    toggleWasOpen: boolean;\n\n    queryDebounced: (search:string, page:number)=>void;\n\n    constructor(props: MultiSelectProps<T>) {\n        super(props);\n        this.id = \"s2-multi-\" + uuid();\n        this.controlRef = React.createRef();\n        this.dropdownRef = React.createRef();\n        this.valuesRef = React.createRef();\n        this.searchRef = React.createRef();\n        this.loadingMoreResults = React.createRef();\n        this.searchFocussedPragmatically = false;\n\n        this.queryDebounced=util.debounce(this.props.quietMillis, this.query, this);\n\n        this.state = ({\n            focused: false,\n            open: false,\n\n            values: props.values,\n            activeValue: -1,\n            selectedValues: [],\n\n            search: \"\",\n            searchPage: 0,\n            searchResults: undefined,\n            searchResultDomIds: undefined,\n            searchHasMoreResults: false,\n            activeSearchResult: -1,\n            showNoSearchResultsFound: false,\n            searchResultsLoading: false,\n            showLoadMoreResults: false,\n            showMinimumCharactersError: false\n        });\n    }\n\n    componentWillMount() {\n        announce.initialize();\n    }\n\n    componentDidUpdate(prevProps: MultiSelectProps<T>, prevState: MultiSelectState<T>) {\n\n        if (prevState.activeSearchResult != this.state.activeSearchResult) {\n\n            if (this.state.activeSearchResult >= 0\n                && this.state.searchResults.length > 0\n                && this.state.activeSearchResult == (this.state.searchResults.length - 1)\n                && this.state.showLoadMoreResults) {\n                // last result is selected and load more is shown, make sure it is scrolled into view\n\n                const drop = this.dropdownRef.current;\n                const el = this.loadingMoreResults.current;\n\n                drop.scrollTop = el.offsetTop + el.offsetHeight - drop.clientHeight;\n\n\n                //console.log(\"scrolling to see load more\");//, setting scrolltop\", drop, el, el.offsetTop - drop.clientHeight);\n\n\n            } else if (this.state.activeSearchResult >= 0) {\n                // make sure it is scrolled into view\n                const id = this.getSearchResultDomId(this.state.activeSearchResult);\n                const el = document.getElementById(id);\n                if (el != null) {\n                    const drop = this.dropdownRef.current;\n\n                    const c = drop.getBoundingClientRect();\n                    const e = el.getBoundingClientRect();\n\n                    if (e.top < c.top && e.bottom <= c.bottom) {\n                        const delta = c.top - e.top;\n                        drop.scrollTop = drop.scrollTop - delta;\n                        //console.log(\"scrolling into view top\");\n                    }\n\n                    if (e.top >= c.top && e.bottom > c.bottom) {\n                        const delta = e.bottom - c.bottom;\n                        drop.scrollTop = drop.scrollTop + delta;\n                        //console.log(\"scrolling into view bottom\");\n                    }\n\n                }\n            }\n        }\n    }\n\n    render() {\n        const props = this.props;\n        const dict = dictionary(props.dictionary);\n        const state = this.state;\n        const searchId = this.getSearchDomId();\n        const dropdownId = this.getDropdownDomId();\n        const valuesLabel = typeof(props.valuesLabel) === \"function\" ? props.valuesLabel() : props.valuesLabel;\n        const searchLabel = typeof(props.searchLabel) === \"function\" ? props.searchLabel() : props.searchLabel;\n\n        return (\n            <div ref={this.controlRef} id={this.id} style={props.style} className={\n                cn(style.s25Multi, style.s25Control, {\n                    s25SearchResultsLoading: state.searchResultsLoading,\n                    s25Focused: state.focused,\n                    s25Open: state.open,\n                })}>\n                <div className={style.s25Body}>\n                    {state.values.map((value, index) => {\n                        return <input key={index} type=\"hidden\" name={props.name} value={this.getItemId(value)}/>\n                    })\n                    }\n                    {state.values.length > 0 &&\n                    <React.Fragment>\n                        <span className={style.s25Offscreen} id={this.getInstructionsDomId()}>\n                            {dict.instructions()}\n                        </span>\n                        <label className={style.s25Offscreen} id={this.getValuesLabelDomId()}>\n                            {valuesLabel}\n                        </label>\n                        <div ref={this.valuesRef}\n                             className={style.s25MultiValues}\n                             tabIndex={0}\n                             role=\"listbox\"\n                             aria-orientation=\"horizontal\"\n                             aria-activedescendant={this.getValueDomId(state.activeValue)}\n                             aria-multiselectable=\"true\"\n                             aria-label={valuesLabel}\n                             aria-labelledby={this.getValuesLabelDomId()}\n                             aria-describedby={this.getInstructionsDomId()}\n                             onKeyDown={this.onValuesKeyDown}\n                             onFocus={this.onValuesFocus}\n                             onBlur={this.onValuesBlur}>\n                            {state.values.map((value, index) => {\n                                const selected = state.selectedValues.indexOf(index) >= 0;\n                                const active = state.activeValue == index;\n                                const id = this.getValueDomId(index);\n                                const classes = cn(style.s25Item, {s25Active: active, s25Selected: selected});\n                                return (\n                                    <div key={index}\n                                         id={id}\n                                         className={classes}\n                                         role=\"option\"\n                                         aria-selected={selected}\n                                         aria-checked={selected}\n                                         aria-label={this.getItemLabel(value)}\n                                         onClick={this.onValueClicked(index)}>\n                                        <div className={style.s25Content}>\n                                            {this.getValueContent(value)}\n                                        </div>\n                                    </div>\n                                );\n                            })}\n                        </div>\n                    </React.Fragment>\n                    }\n\n                    {scope(() => {\n                        //\n                        // REMOVE BUTTON\n                        //\n                        const disabled = state.selectedValues.length < 1;\n                        const className = cn(style.s25Remove, {s25Offscreen: state.values.length < 1});\n                        return (\n                            <button className={className}\n                                    onClick={this.onRemoveSelectedValuesClicked}\n                                    onFocus={this.onRemoveValuesFocus}\n                                    onBlur={this.onRemoveValuesBlur}\n                                    disabled={disabled}\n                                    aria-disabled={disabled}\n                                    title={dict.removeButtonTitle()}>\n                                <span>\n                                    <IconRemove height={20} width={20}/>\n                                </span>\n                            </button>\n                        );\n                    })}\n\n                    <label htmlFor={searchId} className={style.s25Offscreen}>\n                        {searchLabel}\n                    </label>\n                    <input ref={this.searchRef}\n                           className={style.s25Search}\n                           type=\"text\"\n                           id={searchId}\n                           value={state.search}\n                           onChange={this.onSearchChanged}\n                           onKeyDown={this.onSearchKeyDown}\n                           onFocus={this.onSearchFocus}\n                           onBlur={this.onSearchBlur}\n                           role=\"combobox\"\n                           aria-autocomplete=\"none\"\n                           aria-haspopup=\"true\"\n                           aria-owns={dropdownId}\n                           aria-controls={dropdownId}\n                           aria-expanded={state.open}\n                           aria-activedescendant={this.getSearchResultDomId(state.activeSearchResult)}\n                           aria-busy={state.searchResultsLoading}\n                    />\n\n                </div>\n                {/* s2body */}\n\n                <div className={style.s25Toggle}\n                     aria-hidden={true}\n                     onMouseDownCapture={this.onToggleMouseDownCapture}\n                     onClick={this.onToggleClick}>\n                    <IconToggle height={20} width={20}/>\n                </div>\n\n                {state.open &&\n                <Dropdown control={this.controlRef.current} className={style.s25Dropdown}>\n\n                    <div className={style.s25Body + \" \" + style.s25SearchResults}\n                         style={{maxHeight: \"120px\"}}\n                         ref={this.dropdownRef}\n                         aria-busy={state.searchResultsLoading}\n                         id={dropdownId}\n                         onScroll={this.onDropdownScroll}>\n                        {state.searchResults && state.searchResults.length > 0 &&\n                        (\n                            <div className={style.s25Options}\n                                 role=\"listbox\"\n                                 aria-activedescendant={this.getSearchResultDomId(state.activeSearchResult)}>\n                                {\n                                    state.searchResults.map((item, i) => {\n                                        const className = cn(style.s25Item, {s25Active: state.activeSearchResult == i});\n                                        return (\n                                            <div key={i}\n                                                 className={className}\n                                                 id={this.getSearchResultDomId(i)}\n                                                 onMouseDown={this.onMouseDownSearchResult(i)}\n                                                 onMouseMove={this.onMouseEnterSearchResult(i)}\n                                                 onMouseUp={this.onSearchResultClicked(i)}\n                                                 role=\"option\"\n                                                 aria-posinset={i+1}\n                                                 aria-selected={state.activeSearchResult === i}\n                                            >\n                                                {this.getResultContent(item)}\n                                            </div>);\n                                    })\n                                }\n                            </div>\n\n                        )}\n                        {state.showNoSearchResultsFound &&\n                        <div className={style.s25NoSearchResults}>{dict.noSearchResults()}</div>\n                        }\n                        {(state.searchResultsLoading || state.showLoadMoreResults) &&\n                        <div ref={this.loadingMoreResults}\n                             className={cn(style.s25SearchResultsLoading, style.s25SearchResultsMessage)}>{dict.searchResultsLoading()}</div>\n                        }\n                        {(state.showMinimumCharactersError) &&\n                        <div className={cn(style.s25SearchResultsMinimumError, style.s25SearchResultsMessage)}>\n                            {dict.minimumCharactersMessage(state.search.length, props.minimumCharacters)}\n                        </div>\n                        }\n                    </div>\n                </Dropdown>\n                }\n\n            </div>\n        )\n    }\n\n    getItemId(item: T): string {\n        if (typeof this.props.itemId === \"function\") {\n            return this.props.itemId(item);\n        } else {\n            return \"\" + item[this.props.itemId];\n        }\n    }\n\n    getValueContent(item: T) {\n        if (typeof this.props.valueContent === \"function\") {\n            return this.props.valueContent(item);\n        } else {\n            return item[this.props.valueContent];\n        }\n    }\n\n    getItemLabel(item: T): string {\n        if (typeof this.props.itemLabel === \"function\") {\n            return this.props.itemLabel(item);\n        } else {\n            return \"\" + item[this.props.itemLabel];\n        }\n    }\n\n    getResultContent(item: T) {\n        if (this.props.resultContent) {\n            if (typeof this.props.resultContent === \"function\") {\n                return this.props.resultContent(item);\n            } else {\n                return item[this.props.resultContent];\n            }\n        } else {\n            return this.getValueContent(item);\n        }\n    }\n\n    setActiveValue(index: number) {\n        this.setState({activeValue: index});\n    }\n\n    toggleSelectedValue(index: number) {\n        const oldSelected = this.state.selectedValues;\n        const newSelected = oldSelected.slice();\n        const pos = oldSelected.indexOf(index);\n        if (pos >= 0) {\n            newSelected.splice(pos, 1);\n        } else {\n            newSelected.push(index);\n        }\n        this.setState({selectedValues: newSelected, activeValue: index});\n\n    }\n\n    onRemoveSelectedValuesClicked = (event: React.MouseEvent) => {\n        const selected = this.state.selectedValues;\n        const values = this.state.values.slice();\n\n        selected.sort();\n        for (let i = 0; i < selected.length; i++) {\n            values.splice(selected[i] - i, 1);\n        }\n        this.setState({values: values, selectedValues: [], activeValue: values.length > 0 ? 0 : -1});\n        if (values.length > 0) {\n            this.valuesRef.current.focus();\n        } else {\n            this.focusSearch();\n        }\n    };\n\n    onValueClicked = (index: number) => (event: React.MouseEvent) => {\n        this.toggleSelectedValue(index);\n    };\n\n    onValuesFocus = (event: React.FocusEvent) => {\n        let index = 0;\n        if (this.state.selectedValues.length > 0) {\n            index = this.state.selectedValues[0];\n        }\n        this.setActiveValue(index);\n        this.setState({focused: true});\n    };\n\n    onValuesBlur = (event: React.FocusEvent) => {\n        this.setActiveValue(-1);\n        this.setState({focused: false});\n    };\n\n    onValuesKeyDown = (event: React.KeyboardEvent) => {\n        const values = this.state.values;\n        const active = this.state.activeValue;\n\n        //console.log(event.key);\n\n        switch (event.key) {\n            case Key.ArrowLeft:\n            case Key.ArrowUp:{\n                if (active > 0) {\n                    this.setActiveValue(active - 1);\n                }\n                event.preventDefault();\n                break;\n            }\n            case Key.ArrowRight:\n            case Key.ArrowDown:{\n                if (active < values.length - 1) {\n                    this.setActiveValue(active + 1);\n                }\n                event.preventDefault();\n                break;\n            }\n            case Key.PageDown: {\n                // TODO\n                event.preventDefault();\n                break;\n            }\n            case Key.PageUp: {\n                // TODO\n                event.preventDefault();\n                break;\n            }\n            case Key.Home: {\n                this.setActiveValue(0);\n                event.preventDefault();\n                break;\n            }\n            case Key.End: {\n                this.setActiveValue(values.length - 1);\n                event.preventDefault();\n                break;\n            }\n            case Key.Space: {\n                this.toggleSelectedValue(active);\n                event.preventDefault();\n                break;\n            }\n        }\n    };\n\n\n    onSearchResultClicked = (index: number) => (event: React.MouseEvent) => {\n        this.selectSearchResult(index);\n        event.preventDefault();\n    };\n\n    onMouseDownSearchResult = (index: number) => (event: React.MouseEvent) => {\n        if (this.state.activeSearchResult != index) {\n            this.setActiveSearchResult(index);\n        }\n        event.preventDefault();\n    };\n\n    onMouseEnterSearchResult = (index: number) => (event: React.MouseEvent) => {\n        if (this.lastMouseClientX == event.clientX && this.lastMouseClientY == event.clientY) {\n            // the mouse did not move, the dropdown was scrolled instead, we do not change selected element because\n            // it will be scrolled into view and mess with the scrolling of the results in the dropdown\n            return;\n        }\n\n\n        this.lastMouseClientX = event.clientX;\n        this.lastMouseClientY = event.clientY;\n        if (this.state.activeSearchResult != index) {\n            this.setActiveSearchResult(index);\n        }\n    };\n\n    setActiveSearchResult = (index: number) => {\n        this.setState({activeSearchResult: index});\n    };\n\n    onSearchKeyDown = (event: React.KeyboardEvent) => {\n        const results = this.state.searchResults;\n\n        if (!results || results.length < 1) {\n            return;\n        }\n\n        const active = this.state.activeSearchResult;\n\n        switch (event.key) {\n            case Key.ArrowUp: {\n                if (active > 0) {\n                    this.setActiveSearchResult(active - 1);\n                }\n                event.preventDefault();\n                break;\n            }\n            case Key.ArrowDown: {\n                if (active < results.length - 1) {\n                    this.setActiveSearchResult(active + 1);\n                }\n                event.preventDefault();\n                break;\n            }\n            case Key.PageDown: {\n                // TODO\n                event.preventDefault();\n                break;\n            }\n            case Key.PageUp: {\n                // TODO\n                event.preventDefault();\n                break;\n            }\n            case Key.Home: {\n                this.setActiveSearchResult(0);\n                event.preventDefault();\n                break;\n            }\n            case Key.End: {\n                this.setActiveSearchResult(results.length - 1);\n                event.preventDefault();\n                break;\n            }\n            case Key.Escape: {\n                this.close();\n                event.preventDefault();\n                break;\n            }\n            case Key.Enter: {\n                this.selectSearchResult(this.state.activeSearchResult);\n                break;\n            }\n        }\n    };\n\n    open = () => {\n        this.search(\"\", false);\n        this.focusSearch();\n    };\n\n    close() {\n        this.setState({\n            open: false,\n            searchResults: undefined,\n            activeSearchResult: -1,\n            showNoSearchResultsFound: false,\n            searchResultsLoading: false,\n            search: \"\"\n        });\n    }\n\n\n    selectSearchResult(index: number) {\n        const selected = this.state.searchResults[index];\n        const values = this.state.values.slice();\n        values.push(selected);\n        this.setState({\n            values: values\n        });\n        this.close();\n\n        const label = this.getItemLabel(selected);\n        announce.politely(dictionary(this.props.dictionary).valueAdded(label));\n    }\n\n\n    onRemoveValuesFocus = (event: React.FocusEvent) => {\n        this.setState({focused: true});\n    };\n\n    onRemoveValuesBlur = (event: React.FocusEvent) => {\n        this.setState({focused: false});\n    };\n\n\n    focusSearch() {\n        this.searchFocussedPragmatically = true;\n        this.searchRef.current.focus();\n    }\n\n    onSearchFocus = (event: React.FocusEvent) => {\n\n        this.setState({focused: true});\n        if (this.props.openOnSearchFocus && !this.searchFocussedPragmatically) {\n            this.open();\n        }\n\n        this.searchFocussedPragmatically = false;\n    };\n\n    onSearchBlur = (event: React.FocusEvent) => {\n        this.setState({focused: false, open: false, search: \"\"});\n    };\n\n\n    async search(value: string, debounce:boolean) {\n        const props = this.props;\n        const dict = dictionary(props.dictionary);\n        const searchPage = 0;\n\n        const minimumCharactersReached = (value.length >= this.props.minimumCharacters);\n\n        this.setState({\n            searchResults: undefined,\n            searchResultDomIds: undefined,\n            search: value,\n            searchPage: searchPage,\n            searchResultsLoading: minimumCharactersReached,\n            showNoSearchResultsFound: false,\n            open: true,\n            activeSearchResult: -1,\n            showLoadMoreResults: false,\n            showMinimumCharactersError: !minimumCharactersReached\n        });\n\n        if (!minimumCharactersReached) {\n            // todo - throttle this announcement?\n            announce.politely(dict.minimumCharactersMessage(value.length, this.props.minimumCharacters));\n            return;\n        }\n\n        // todo - throttle this announcement?\n        announce.politely(dict.searchResultsLoading());\n\n        if (debounce) {\n            this.queryDebounced(value, searchPage);\n        } else {\n            this.query(value, searchPage);\n        }\n\n    }\n\n\n\n    async query(search:string, page:number) {\n        try {\n            const dict = dictionary(this.props.dictionary);\n            const result = await this.props.query(search, page);\n            let searchResultDomIds: number[] = [];\n            result.values.forEach(() => {\n                searchResultDomIds.push(uuid())\n            });\n\n            if (result.values.length < 1) {\n                announce.politely(dict.noSearchResults());\n            }\n\n            this.setState({\n                searchResults: result.values,\n                searchResultDomIds: searchResultDomIds,\n                searchHasMoreResults: result.more,\n                activeSearchResult: result.values.length > 0 ? 0 : -1,\n                showNoSearchResultsFound: result.values.length < 1,\n                searchResultsLoading: false,\n                showLoadMoreResults: result.more,\n                searchPage: 0\n            });\n        } catch (e) {\n            // TODO for now assuming all failures are cancellations, should we treat them differently?\n\n        }\n    }\n\n\n\n    onSearchChanged = (event: React.ChangeEvent<HTMLInputElement>) => {\n        const value = event.target.value;\n        this.search(value, true);\n    };\n\n    async onLoadMore() {\n        if (this.state.searchResultsLoading) {\n            return;\n        }\n        const dict = dictionary(this.props.dictionary);\n        const page = this.state.searchPage + 1;\n        const value = this.searchRef.current.value;\n        this.setState({\n            searchResultsLoading: true,\n        });\n\n        announce.politely(dict.searchResultsLoading());\n\n        try {\n            const result = await this.props.query(value, page);\n            const searchResultDomIds = this.state.searchResultDomIds.slice();\n            const searchResults = this.state.searchResults.slice();\n            result.values.forEach((result) => {\n                searchResults.push(result);\n                searchResultDomIds.push(uuid())\n            });\n\n            if (result.values.length < 1) {\n                // TODO announce no further results\n                announce.politely(dict.noSearchResults());\n            }\n\n            this.setState({\n                searchResults: searchResults,\n                searchResultDomIds: searchResultDomIds,\n                searchHasMoreResults: result.more,\n                searchResultsLoading: false,\n                showLoadMoreResults: result.more,\n                searchPage: page\n                // TODO collapse showLoadMoreReults and searchhasMoreResults?\n            });\n\n        } catch (e) {\n            // TODO for now assuming all failures are canellations, should we treat them differently?\n        }\n\n\n    }\n\n    onDropdownScroll = (event: React.UIEvent) => {\n        if (!this.state.showLoadMoreResults) {\n            return;\n        }\n        const more = this.loadingMoreResults.current;\n        const drop = this.dropdownRef.current;\n\n        const visibility = util.calculateVerticalVisibility(drop, more);\n        if (visibility !== \"hidden\") {\n            this.onLoadMore();\n        }\n\n    };\n\n\n    onRemove = (index: number) => (event: React.MouseEvent) => {\n        const oldValues = this.state.values;\n        const newValues = this.state.values.slice();\n        const removedValue = newValues.splice(index, 1)[0];\n\n        if (this.props.onValueRemoved) {\n            this.props.onValueRemoved(removedValue, oldValues, newValues);\n        }\n\n        if (this.props.onValuesChanged) {\n            this.props.onValuesChanged(newValues, oldValues);\n        }\n\n        this.setState({values: newValues}, () => {\n            //console.log(\"set state callback\");\n            if (this.state.values.length == 0) {\n                this.focusSearch();\n            } else {\n                const values = this.state.values;\n                let focus = index;\n                if (focus >= values.length) {\n                    focus = values.length - 1;\n                }\n                document.getElementById(this.getValueDomId(focus)).focus();\n            }\n\n        });\n    };\n\n    getValuesLabelDomId() {\n        return this.id + \"-values-label\";\n    }\n\n    getInstructionsDomId() {\n        return this.id + \"-instructions\";\n    }\n\n    getSearchDomId() {\n        return this.id + \"-search\";\n    }\n\n    getDropdownDomId() {\n        return this.id + \"-dropdown\";\n    }\n\n\n    getValueDomId(index: number) {\n        return (index === undefined || index < 0) ? undefined : this.id + \"-value-\" + index;\n    }\n\n    getSearchResultDomId(index: number) {\n        return (index === undefined || index < 0) ?\n            undefined :\n            this.id + \"-result-\" + this.state.searchResultDomIds[index];\n    }\n\n    onToggleMouseDownCapture = (event: React.MouseEvent) => {\n        this.toggleWasOpen = this.state.open;\n    };\n\n    onToggleClick = (event: React.MouseEvent) => {\n        if (this.toggleWasOpen) {\n            this.close();\n        } else {\n            this.open();\n        }\n        this.focusSearch();\n    }\n\n}\n\n\nclass IconToggle extends React.PureComponent<{ height: number, width: number }, {}> {\n    render() {\n        const viewBox = \"0 0 \" + this.props.width + \" \" + this.props.height;\n        return <svg height={this.props.height} width={this.props.width} viewBox={viewBox} tabIndex={-1}\n                    focusable=\"false\">\n            <path\n                d=\"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z\"></path>\n        </svg>\n    }\n}\n\nclass IconRemove extends React.PureComponent<{ height: number, width: number }, {}> {\n    render() {\n        const viewBox = \"0 0 \" + this.props.width + \" \" + this.props.height;\n        return <svg height={this.props.height} width={this.props.width} viewBox={viewBox} tabIndex={-1}\n                    focusable=\"false\">\n            <path\n                d=\"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z\"></path>\n        </svg>\n    }\n}\n","export function initialize() {\n    if (document.getElementById(\"s25-live\")) {\n        return;\n    }\n\n    const live = document.createElement(\"div\");\n    live.setAttribute(\"id\", \"s25-live\");\n    live.setAttribute(\"class\", \"s25-offscreen s25-live\");\n    document.body.appendChild(live);\n\n    const assertive = document.createElement(\"div\");\n    assertive.setAttribute(\"id\", \"s25-live-assertive\");\n    assertive.setAttribute(\"role\", \"log\");\n    assertive.setAttribute(\"aria-live\", \"assertive\");\n    assertive.setAttribute(\"aria-relevant\", \"additions\");\n    live.appendChild(assertive);\n\n    const polite = document.createElement(\"div\");\n    polite.setAttribute(\"id\", \"s25-live-polite\");\n    polite.setAttribute(\"role\", \"log\");\n    polite.setAttribute(\"aria-live\", \"polite\");\n    polite.setAttribute(\"aria-relevant\", \"additions\");\n    live.appendChild(polite);\n\n}\n\nexport function assertively(message: string) {\n    add(message, document.getElementById(\"s25-live-assertive\"));\n}\n\nexport function politely(message: string) {\n    add(message, document.getElementById(\"s25-live-polite\"))\n}\n\nfunction add(message: string, container: HTMLElement) {\n    const node = document.createElement(\"div\");\n    node.appendChild(document.createTextNode(message));\n    container.appendChild(node);\n\n    // clean up old nodes\n\n    let collection=document.getElementById(\"s25-live-assertive\");\n    while (collection.firstChild && collection.firstChild != node) {\n        collection.removeChild(collection.firstChild);\n    }\n    collection=document.getElementById(\"s25-live-polite\");\n    while (collection.firstChild && collection.firstChild != node) {\n        collection.removeChild(collection.firstChild);\n    }\n\n}\n\n","import * as React from \"react\";\nimport * as util from \"./util\";\nimport {createPortal} from \"react-dom\";\n\nexport interface DropdownProps {\n    control: HTMLElement, // TODO make this a ref\n    className?: string,\n    children: React.ReactNode\n}\n\nexport class Dropdown extends React.PureComponent<DropdownProps, {}> {\n\n    container: HTMLElement;\n\n    scrollParents: EventTarget[];\n    private readonly throttledPosition: () => void;\n\n    constructor(props: DropdownProps) {\n        super(props);\n        this.throttledPosition = util.throttle(50, this.position);\n    }\n\n    componentWillMount() {\n        this.container = document.createElement(\"div\");\n        const cn = this.props.className;\n        if (cn) {\n            this.container.setAttribute(\"class\", cn);\n        }\n        document.body.appendChild(this.container);\n\n    }\n\n    componentWillUnmount() {\n        this.scrollParents.forEach((parent) => {\n            [\"resize\", \"scroll\", \"touchmove\"].forEach((event) => {\n                parent.removeEventListener(event, this.throttledPosition);\n            });\n        });\n        delete this.scrollParents;\n        document.body.removeChild(this.container);\n        delete this.container;\n    }\n\n\n    render() {\n        return createPortal(this.props.children, this.container);\n    }\n\n    componentDidMount() {\n        this.scrollParents = util.getScrollParents(this.props.control);\n        this.scrollParents.forEach((parent) => {\n            [\"resize\", \"scroll\", \"touchmove\"].forEach((event) => {\n                parent.addEventListener(event, this.throttledPosition);\n            });\n        });\n        this.position();\n    }\n\n    componentDidUpdate() {\n        this.position();\n    }\n\n    position = () => {\n        const control = this.props.control;\n        const rect = control.getBoundingClientRect();\n        const style = `\n            top: ${rect.top + rect.height + window.pageYOffset}px;\n            left: ${rect.left + window.pageXOffset}px;\n            width: ${rect.width}px;\n        `;\n        // TODO also called on scroll of children - should not be\n        // console.log(\"position\");\n        this.container.setAttribute(\"style\", style);\n    }\n}\n\n","module.exports = __WEBPACK_EXTERNAL_MODULE__9__;","export interface Dictionary {\n    valueAdded(itemLabel: string): string;\n\n    noSearchResults(): string;\n\n    searchResultsLoading(): string;\n\n    removeButtonTitle(): string;\n\n    minimumCharactersMessage(len: number, min: number): string;\n\n    instructions(): string;\n}\n\nclass AmericanEnglishDictionary implements Dictionary {\n\n    noSearchResults() {\n        return \"No results available\";\n    }\n\n    searchResultsLoading() {\n        return \"Loading...\";\n    }\n\n    removeButtonTitle() {\n        return \"Remove selected values\";\n    }\n\n    valueAdded(itemLabel: string) {\n        return itemLabel + \" added\";\n    }\n\n    minimumCharactersMessage(len: number, min: number) {\n        const delta = min - len;\n        return \"Please enter \" + delta + \" more character\" + (delta > 1 ? \"s\" : \"\");\n    }\n\n    instructions(): string {\n        return \"Items can be removed from this list box by selecting them and activating 'Remove selected values' button. Items can be added by selecting them in the adjacent combobox.\";\n    }\n}\n\nconst dictionaries = new Map<string, Dictionary>();\ndictionaries.set(\"en_us\", new AmericanEnglishDictionary());\n\nexport function dictionary(dict: Dictionary | string): Dictionary {\n    const fallback = dictionaries.get(\"en_us\");\n\n    if (!dict) {\n        return fallback;\n    }\n\n    if (typeof dict == \"string\") {\n        const instance = dictionaries.get(dict);\n        return instance ? instance : fallback;\n    } else {\n        return dict;\n    }\n}\n"],"sourceRoot":""}